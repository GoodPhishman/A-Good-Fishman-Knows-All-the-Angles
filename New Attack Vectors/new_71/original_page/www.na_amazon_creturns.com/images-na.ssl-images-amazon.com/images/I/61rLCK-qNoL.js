(function(D){var x=window.AmazonUIPageJS||window.P,v=x._namespace||x.attributeErrors,p=v?v("IdentityWebAuthnAssets",""):x;p.guardFatal?p.guardFatal(D)(p,window):p.execute(function(){D(p,window)})})(function(D,x,v){var p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"===typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},aa;(function(){function F(b){var c=ba[b];if(c!==v)return c.exports;c=ba[b]={exports:{}};
D[b](c,c.exports,F);return c.exports}var D={6957:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}
function h(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==f(a)&&"function"!==typeof a)return{"default":a};if((b=e(b))&&b.has(a))return b.get(a);var c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,n;for(n in a)if("default"!==n&&Object.prototype.hasOwnProperty.call(a,n)){var m=l?Object.getOwnPropertyDescriptor(a,n):null;m&&(m.get||m.set)?Object.defineProperty(c,n,m):c[n]=a[n]}c["default"]=a;b&&b.set(a,c);return c}Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,
"IdentityKatalMetricsPublisher",{enumerable:!0,get:function(){return d["default"]}});Object.defineProperty(c,"MetricsOption",{enumerable:!0,get:function(){return d.MetricsOption}});Object.defineProperty(c,"Platform",{enumerable:!0,get:function(){return k.Platform}});Object.defineProperty(c,"PlatformDetector",{enumerable:!0,get:function(){return k["default"]}});Object.defineProperty(c,"generateUUID",{enumerable:!0,get:function(){return q["default"]}});var d=h(a(660)),k=h(a(4560)),q=function(a){return a&&
a.__esModule?a:{"default":a}}(a(9606))},660:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a){return a&&a.__esModule?a:{"default":a}}function h(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,
m=new WeakMap;return(h=function(a){return a?m:b})(a)}function d(a,b){for(var m=0;m<b.length;m++){var g=b[m];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function k(a,b,m){b&&d(a.prototype,b);m&&d(a,m);Object.defineProperty(a,"prototype",{writable:!1});return a}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var q=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==f(a)&&"function"!==typeof a)return{"default":a};
if((b=h(b))&&b.has(a))return b.get(a);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,c;for(c in a)if("default"!==c&&Object.prototype.hasOwnProperty.call(a,c)){var l=g?Object.getOwnPropertyDescriptor(a,c):null;l&&(l.get||l.set)?Object.defineProperty(m,c,l):m[c]=a[c]}m["default"]=a;b&&b.set(a,m);return m}(a(5989)),l=e(a(8277)),t=e(a(1472)),r=e(a(4560));b=function(){function a(b,m,g,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var w=x.location.hostname;
console.log("IdentityKatalMetricsPublisher is running on ".concat(w));a.AMAZON_DOMAIN_HELPER=new t["default"];var n=a.getDataSet(w);w=a.AMAZON_DOMAIN_HELPER.getMarketplaceRealm(w);b=(new q.Context.Builder).withSite(b).withServiceName(m);c&&b.withActionId(c);c=b.build();b=function(a){console.error("Unable to publish metrics",a)};n=(new l["default"].Builder).withDomainRealm(n,w).withErrorHandler(b).withSushiClientOptions({hiPriFlushInterval:8,lowPriFlushInterval:13}).build();this.childMetricsPublisher=
(new q.Publisher(n,b,c)).newChildActionPublisherForMethod(g,c);this.platformDetector=new r["default"]}k(a,[{key:"attachDimensions",value:function(a,b){var g={};b&&"undefined"!==typeof b.os&&(g.os=b.os);b&&"undefined"!==typeof b.browser&&(g.browser=b.browser);b&&"undefined"!==typeof b.consentui&&(g.consentui=b.consentui);b&&"undefined"!==typeof b.pb&&(g.pb=b.pb);a="".concat(a);for(var c in g)a="".concat(a,":").concat(c,"@").concat(g[c]);return a}},{key:"sanitizeMetricsKey",value:function(a){return a.replace(":",
"_")}},{key:"publishCounter",value:function(a,b){var g=2<arguments.length&&arguments[2]!==v?arguments[2]:{metricsDimension:{os:this.platformDetector.getOSName(),browser:this.platformDetector.getBrowserName()}},c=this.sanitizeMetricsKey(a);c=this.attachDimensions(c,g.metricsDimension);this.childMetricsPublisher.publishCounterMonitor(c,b)}},{key:"publishCounterOnce",value:function(a){this.publishCounter(a,1,1<arguments.length&&arguments[1]!==v?arguments[1]:{})}},{key:"publishTimer",value:function(a,
b){var g=2<arguments.length&&arguments[2]!==v?arguments[2]:{metricsDimension:{os:this.platformDetector.getOSName(),browser:this.platformDetector.getBrowserName()}},c=this.sanitizeMetricsKey(a);c=this.attachDimensions(c,g.metricsDimension);this.childMetricsPublisher.publishTimerMonitor(c,b)}}],[{key:"getDataSet",value:function(b){return a.AMAZON_DOMAIN_HELPER.isAmazonProdDomain(b)?"prod":"test"}}]);return a}();c["default"]=b;(function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,
configurable:!0,writable:!0}):a[b]=c;return a})(b,"AMAZON_DOMAIN_HELPER",new t["default"])},1472:function(b,c){function a(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=f(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var l=0;b=function(){};return{s:b,n:function(){return l>=a.length?{done:!0}:{done:!1,value:a[l++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var q=!0,n=!1,m;return{s:function(){c=c.call(a)},n:function(){var a=c.next();q=a.done;return a},e:function(a){n=!0;m=a},f:function(){try{if(!q&&null!=c["return"])c["return"]()}finally{if(n)throw m;}}}}function f(a,b){if(a){if("string"===typeof a)return e(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return e(a,b)}}function e(a,
b){if(null==b||b>a.length)b=a.length;for(var c=0,l=Array(b);c<b;c++)l[c]=a[c];return l}function h(a,b){for(var c=0;c<b.length;c++){var l=b[c];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}function d(a,b,c){b&&h(a.prototype,b);c&&h(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function k(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=void 0;b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");}d(b,[{key:"isAmazonDomain",value:function(a){return b.AMAZON_ENDPOINT_REGEX.test(a)}},{key:"isDevoDomain",value:function(a){return b.DEVO_ENDPOINT_REGEX.test(a)}},{key:"isAmazonProdDomain",value:function(a){return this.isAmazonDomain(a)&&!this.isDevoDomain(a)}},{key:"getMarketplaceDomain",value:function(a){return a&&(a=a.match(b.AMAZON_ENDPOINT_REGEX))?
(a=a[0],a.startsWith(".")?a.substring(1):a):b.US_AMAZON_DOMAIN}},{key:"getMarketplaceRealm",value:function(a){a=this.getMarketplaceDomain(a);return(a=b.DOMAIN_REALEM_MAPPING[a])?a:b.NA_AMAZON_REALM}},{key:"encodeUrl",value:function(b){try{if(!b)return null;var c=new URL(b);b="";var k=a(c.searchParams),l;try{for(k.s();!(l=k.n()).done;){var n=l.value;b="".concat(0===b.length?"":b+"\x26").concat(n[0],"\x3d").concat(encodeURIComponent(n[1]))}}catch(m){k.e(m)}finally{k.f()}return c.protocol+"//"+c.host+
("/"===c.pathname?"":c.pathname)+(0<b.length?"?"+b:"")+(c.hash?c.hash:"")}catch(m){return console.error(m),null}}}]);return b}();c["default"]=b;k(b,"NA_AMAZON_REALM","NAAmazon");k(b,"EU_AMAZON_REALM","EUAmazon");k(b,"FE_AMAZON_REALM","FEAmazon");k(b,"CN_AMAZON_REALM","CNAmazon");k(b,"AMAZON_ENDPOINT_REGEX",/(^|\.)amazon\.((ae|ca|cn|com|de|eg|es|eu|fr|in|it|nl|pl|sa|se|sg|co\.(jp|uk))|com\.(au|br|mx|sg|tr|co))$/);k(b,"US_AMAZON_DOMAIN","amazon.com");k(b,"DEVO_ENDPOINT_REGEX",/(localhost)|(\.integ\.)|([-]*development\.)|(dev-dsk-)|(\.corp\.)/);
k(b,"DOMAIN_REALEM_MAPPING",{"amazon.com":b.NA_AMAZON_REALM,"amazon.ca":b.NA_AMAZON_REALM,"amazon.com.br":b.NA_AMAZON_REALM,"amazon.com.co":b.NA_AMAZON_REALM,"amazon.com.mx":b.NA_AMAZON_REALM,"amazon.ae":b.EU_AMAZON_REALM,"amazon.be":b.EU_AMAZON_REALM,"amazon.co.uk":b.EU_AMAZON_REALM,"amazon.com.tr":b.EU_AMAZON_REALM,"amazon.de":b.EU_AMAZON_REALM,"amazon.eg":b.EU_AMAZON_REALM,"amazon.es":b.EU_AMAZON_REALM,"amazon.eu":b.EU_AMAZON_REALM,"amazon.fr":b.EU_AMAZON_REALM,"amazon.in":b.EU_AMAZON_REALM,"amazon.it":b.EU_AMAZON_REALM,
"amazon.nl":b.EU_AMAZON_REALM,"amazon.pl":b.EU_AMAZON_REALM,"amazon.sa":b.EU_AMAZON_REALM,"amazon.se":b.EU_AMAZON_REALM,"amazon.cn":b.CN_AMAZON_REALM,"amazon.co.jp":b.FE_AMAZON_REALM,"amazon.com.au":b.FE_AMAZON_REALM,"amazon.sg":b.FE_AMAZON_REALM})},4560:function(b,c,a){function f(a,b){for(var c=0;c<b.length;c++){var k=b[c];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(a,k.key,k)}}function e(a,b,c){b&&f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,
"prototype",{writable:!1});return a}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=c.Platform=void 0;var h=function(a){return a&&a.__esModule?a:{"default":a}}(a(942)),d;c.Platform=d;(function(a){a.Android="android";a.iOS="ios";a.Other="other"})(d||(c.Platform=d={}));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}e(a,[{key:"getBrowserName",value:function(){var a=this.testUserAgent(/edge|edg|edgiOS|edgA/i)?"edge":this.testUserAgent(/opt|opr\//i)?
"opera":this.testUserAgent(/firefox|fxios/i)?"firefox":this.testUserAgent(/chrome|chromium|crios/i)?"chrome":this.testUserAgent(/safari/i)?"safari":"unknown";console.info('[Browser detection] Browser Name: "'.concat(a,'". User Agent: "').concat(x.navigator.userAgent,'".'));return a}},{key:"isRunningInWebView",value:function(){var a=(0,h["default"])(x.navigator.userAgent);a||(a=this.testUserAgent(/Amazon\.com\/\d+\.\d+/i));console.info("Is running in WebView: "+a);return a}},{key:"getOSName",value:function(){return this.testUserAgent(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&
!this.testUserAgent(/trident|Edge/i)?d.iOS:this.testUserAgent(/android.([1-9]|[L-Z])/i)&&!this.testUserAgent(/trident|Edge/i)?d.Android:d.Other}},{key:"testUserAgent",value:function(a){try{return a.test(x.navigator.userAgent)}catch(l){return!1}}}]);return a}();c["default"]=b},9606:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(){return(0,f.v4)()};var f=a(5877)},4572:function(){},7127:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==
typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,k(g.key),g)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",
{writable:!1});return a}function d(a,b,c){b=k(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function k(a){a:if("object"===f(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==f(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===f(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var q=a(5177),l=a(9629),t=a(9320),
r=a(5792),u=a(8871),n=a(6390);b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}h(a,[{key:"createNativePasskeyCredential",value:function(b){return new Promise(function(c,g){a.makeNativeAPICall(c,g,{publicKey:{rp:{id:b.rp.id,name:b.rp.name},user:{id:b.user.id,name:b.user.name,displayName:b.user.displayName},challenge:b.challenge,excludeCredentials:b.excludeCredentials,timeout:b.timeout,authenticatorSelection:b.authenticatorSelection,pubKeyCredParams:b.pubKeyCredParams},
timeout:a.DEFAULT_TIMEOUT_MILLIS},a.CREATE_CREDENTIAL_API_METHOD,a.createCredentialResultAdaptor)})}},{key:"getNativePasskeyCredential",value:function(b){return new Promise(function(c,g){var m={publicKey:{rpId:b.relyingPartyId,challenge:b.challenge,userVerification:b.userVerification,timeout:b.timeout},timeout:a.DEFAULT_TIMEOUT_MILLIS};b.mediation?(m.mediation=b.mediation,b.autofillMode&&(m.autofillMode=b.autofillMode)):b.allowedCredentials&&(m.publicKey.allowCredentials=b.allowedCredentials);a.makeNativeAPICall(c,
g,m,a.GET_CREDENTIAL_API_METHOD,a.getCredentialResultAdaptor)})}},{key:"isNativePasskeyAPIAvailable",value:function(){var a=this;return new Promise(function(b,c){c=q.MAPNativeJSInterface.getInstance();var g=c.getMinVersionForFeature(q.Feature.PASSKEY,1);if(g)c.getNativeInfo().then(function(c){if(c instanceof q.GetNativeInfoAPISuccessResponse){var m=c.platformInfo.name.toLowerCase(),w=c.platformInfo.version,n=c.mapInfo.jsVersion;c=c.appInfo.identifier;m===r.iOSConfig.platformName?b(a.shouldSupportPasskeyiOS(w,
n,c,g)):m===r.AndroidConfig.platformName?b(a.shouldSupportPasskeyAndroid(w,n,c,g)):b(!1)}else console.error("NativeInfo is not instance of GetNativeInfoAPISuccessResponse"),b(!1)})["catch"](function(a){console.error("Unexpected error caught: ".concat(a.error.errorCode));b(!1)});else console.error("getMinVersionForFeature returned null"),b(!1)})}},{key:"shouldSupportPasskeyiOS",value:function(a,b,c,m){return a<r.iOSConfig.minVersion.IDENTITY_MOBILE_PASSKEY||b<m.minMAPiOSJsBridgeVersion||!r.iOSConfig.appNameAllowList.includes(c)?
!1:!0}},{key:"shouldSupportPasskeyAndroid",value:function(a,b,c,m){return a<r.AndroidConfig.minVersion.IDENTITY_MOBILE_PASSKEY||b<m.minMAPAndroidJsBridgeVersion||!r.AndroidConfig.appNameAllowList.includes(c)?!1:!0}}],[{key:"makeNativeAPICall",value:function(b,c,m,n,k){m=new q.NativeJsInterfaceAPIRequest(a.PASSKEY_API_NAME_SPACE,n,m);q.MAPNativeJSInterface.getInstance().apiCall(m).then(function(c){b(k.call(a,c))})["catch"](function(a){console.error("Unexpected error caught: ".concat(a));c(a)})}},{key:"createCredentialResultAdaptor",
value:function(a){return a.error?(console.error("Got error from native JS bridge caller: ".concat(a.error.errorCode,", ").concat(JSON.stringify(a.error.errorDetails))),a.error.errorCode===t.PasskeyNativeCreateCredentialErrorCode.ENROLLMENT_CANCELLED?l.CreateNativePasskeyCredentialErrorCode.UserCancelError:a.error.errorCode===t.PasskeyNativeCreateCredentialErrorCode.UNABLE_TO_ENROLL?l.CreateNativePasskeyCredentialErrorCode.CredentialCreationFailed:a.error.errorCode===t.PasskeyNativeGetCredentialErrorCode.ENROLL_TIMEOUT||
a.error.errorCode===q.ErrorCode.TIMEOUT_ERROR?l.CreateNativePasskeyCredentialErrorCode.TimeoutError:l.CreateNativePasskeyCredentialErrorCode.InternalFailure):this.createCredentialAdaptWebAuthNResponse(a.apiResult)}},{key:"createCredentialAdaptWebAuthNResponse",value:function(b){var c={attestationObject:(0,u.base64UrlStringToBuffer)(b.response.attestationObject),clientDataJSON:(0,u.base64UrlStringToBuffer)(b.response.clientDataJSON),getAuthenticatorData:function(){return(0,n.extractAuthenticatorDataFromAttestationObject)(this.attestationObject)},
getPublicKey:function(){return null},getPublicKeyAlgorithm:function(){return a.COSE_ALGORITHM_IDENTIFIER},getTransports:function(){return b.response.transports}};return{id:b.id,type:b.type,rawId:(0,u.base64UrlStringToBuffer)(b.rawId),response:c,authenticatorAttachment:b.authenticatorAttachment,getClientExtensionResults:function(){return{}}}}},{key:"getCredentialResultAdaptor",value:function(a){return a.error?(console.error("Got error from native JS bridge caller: ".concat(a.error.errorCode,", ").concat(JSON.stringify(a.error.errorDetails))),
a.error.errorCode===t.PasskeyNativeGetCredentialErrorCode.USER_CANCEL?l.GetNativePasskeyCredentialErrorCode.UserCancelError:a.error.errorCode===t.PasskeyNativeGetCredentialErrorCode.UNABLE_TO_AUTHENTICATE?l.GetNativePasskeyCredentialErrorCode.CredentialNotFound:a.error.errorCode===t.PasskeyNativeGetCredentialErrorCode.ENROLL_TIMEOUT||a.error.errorCode===q.ErrorCode.TIMEOUT_ERROR?l.GetNativePasskeyCredentialErrorCode.TimeoutError:l.GetNativePasskeyCredentialErrorCode.InternalFailure):this.getCredentialAdaptWebAuthNResponse(a.apiResult)}},
{key:"getCredentialAdaptWebAuthNResponse",value:function(a){if("password"===a.responseType)return{id:(0,u.base64URLdecode)(a.response.user),password:(0,u.base64URLdecode)(a.response.password)};var b={authenticatorData:(0,u.base64UrlStringToBuffer)(a.response.authenticatorData),clientDataJSON:(0,u.base64UrlStringToBuffer)(a.response.clientDataJSON),signature:(0,u.base64UrlStringToBuffer)(a.response.signature),userHandle:(0,u.stringToBuffer)(a.response.userHandle)};return{id:a.id,rawId:(0,u.base64UrlStringToBuffer)(a.rawId),
response:b,type:a.type,authenticatorAttachment:null,getClientExtensionResults:function(){return{}}}}}]);return a}();c["default"]=b;d(b,"PASSKEY_API_NAME_SPACE","IDENTITY_MOBILE_PASSKEY");d(b,"CREATE_CREDENTIAL_API_METHOD","createCredential");d(b,"GET_CREDENTIAL_API_METHOD","getCredential");d(b,"DEFAULT_TIMEOUT_MILLIS",6E4);d(b,"COSE_ALGORITHM_IDENTIFIER",-7)},9629:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.GetNativePasskeyCredentialErrorCode=c.CreateNativePasskeyCredentialErrorCode=
void 0;b=function(a){a.UserCancelError="ClientError_UserCancelError";a.TimeoutError="ClientError_TimeoutError";a.CredentialCreationFailed="ClientError_CredentialCreationFailed";a.InternalFailure="ClientError_InternalFailure";return a}({});c.CreateNativePasskeyCredentialErrorCode=b;b=function(a){a.UserCancelError="ClientError_UserCancelError";a.TimeoutError="ClientError_TimeoutError";a.CredentialNotFound="ClientError_CredentialNotFound";a.InternalFailure="ClientError_InternalFailure";return a}({});
c.GetNativePasskeyCredentialErrorCode=b},5792:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.iOSConfig=c.AndroidConfig=void 0;c.iOSConfig={platformName:"ios",appNameAllowList:"com.amazon.MAPiOSLibSampleApp com.amazon.Amazon com.amazon.AmazonJP com.amazon.AmazonUK com.amazon.AmazonFR com.amazon.AmazonDE com.amazon.AmazonCN com.amazon.Amazon.development com.amazon.Amazon.Enterprise".split(" "),minVersion:{IDENTITY_MOBILE_PASSKEY:16,DEFAULT:12}};c.AndroidConfig={platformName:"android",
appNameAllowList:"com.amazon.map.sample.one com.amazon.mShop.android.shopping com.amazon.mShop.android in.amazon.mShop.android.shopping uk.amazon.mShop.android cn.amazon.mShop.android de.amazon.mShop.android fr.amazon.mShop.android jp.amazon.mShop.android com.amazon.mShop.android.beta com.amazon.photos com.amazon.clouddrive.photos com.amazon.avod com.amazon.avod.thirdpartyclient com.amazon.venezia com.amazon.mShop.android.business.shopping in.amazon.mShop.android.business.shopping".split(" "),minVersion:{IDENTITY_MOBILE_PASSKEY:28,
DEFAULT:16}}},7395:function(b,c,a){function f(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"xs",{enumerable:!0,get:function(){return h.CreateNativePasskeyCredentialErrorCode}});Object.defineProperty(c,"wM",{enumerable:!0,get:function(){return h.GetNativePasskeyCredentialErrorCode}});Object.defineProperty(c,"v1",{enumerable:!0,get:function(){return e["default"]}});f(a(4572));var e=f(a(7127)),h=a(9629)},9320:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.PasskeyNativeGetCredentialErrorCode=
c.PasskeyNativeCreateCredentialErrorCode=void 0;b=function(a){a.UNABLE_TO_ENROLL="UNABLE_TO_ENROLL";a.ENROLLMENT_CANCELLED="ENROLLMENT_CANCELLED";a.ENROLL_TIMEOUT="ENROLL_TIMEOUT";a.GENERAL_ERROR="GENERAL_ERROR";return a}({});c.PasskeyNativeCreateCredentialErrorCode=b;b=function(a){a.UNABLE_TO_AUTHENTICATE="UNABLE_TO_AUTHENTICATE";a.USER_CANCEL="USER_CANCEL";a.ENROLL_TIMEOUT="ENROLL_TIMEOUT";a.GENERAL_ERROR="GENERAL_ERROR";return a}({});c.PasskeyNativeGetCredentialErrorCode=b},8871:function(b,c){function a(a){return Uint8Array.from(a,
function(a){return a.charCodeAt(0)}).buffer}Object.defineProperty(c,"__esModule",{value:!0});c.base64URLdecode=function(a){a=a.replace(/-/g,"+").replace(/_/g,"/");return atob(a)};c.base64UrlStringToBuffer=function(b){return a(x.atob(b.replace(/-/g,"+").replace(/_/g,"/")))};c.bufferToBase64UrlString=function(a){return x.btoa((new Uint8Array(a)).reduce(function(a,b){return a+String.fromCharCode(b)},"")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")};c.stringToBuffer=a},6810:function(b,c){function a(b){"@babel/helpers - typeof";
return a="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},a(b)}Object.defineProperty(c,"__esModule",{value:!0});c.decode=function(a,b,c){function l(a,b){B+=b;return a}function k(b){return l(new Uint8Array(a,B,b),b)}function d(){return l(q.getUint8(B),1)}function u(){if(255!==q.getUint8(B))return!1;
B+=1;return!0}function n(a){if(24>a)return a;if(24===a)return d();if(25===a)return l(q.getUint16(B),2);if(26===a)return l(q.getUint32(B),4);if(27===a)return l(q.getUint32(B),4)*e+l(q.getUint32(B),4);if(31===a)return-1;throw"Invalid length encoding";}function m(a){var b=d();if(255===b)return-1;var c=n(b&31);if(0>c||b>>5!==a)throw"Invalid indefinite length element";return c}function g(a,b){for(var c=0;c<b;++c){var g=d();g&128&&(224>g?(g=(g&31)<<6|d()&63,--b):240>g?(g=(g&15)<<12|(d()&63)<<6|d()&63,b-=
2):(g=(g&15)<<18|(d()&63)<<12|(d()&63)<<6|d()&63,b-=3));65536>g?a.push(g):(g-=65536,a.push(55296|g>>10),a.push(56320|g&1023))}}function w(){var a=d(),e=a>>5;a&=31;if(7===e)switch(a){case 25:a:{e=new ArrayBuffer(4);e=new DataView(e);a=l(q.getUint16(B),2);var y=a&31744,h=a&1023;if(31744===y)y=261120;else if(0!==y)y+=114688;else if(0!==h){e=h*f;break a}e.setUint32(0,(a&32768)<<16|y<<13|h<<13);e=e.getFloat32(0)}return e;case 26:return l(q.getFloat32(B),4);case 27:return l(q.getFloat64(B),8)}a=n(a);if(0>
a&&(2>e||6<e))throw"Invalid length";switch(e){case 0:return a;case 1:return-1-a;case 2:if(0>a){y=[];for(h=0;0<=(a=m(e));)h+=a,y.push(k(a));a=new Uint8Array(h);for(e=h=0;e<y.length;++e){var r=new Uint8Array(y[e]);a.set(r,h);h+=r.length}return a}return k(a);case 3:y=[];if(0>a)for(;0<=(a=m(e));)g(y,a);else g(y,a);return String.fromCharCode.apply(null,y);case 4:if(0>a)for(y=[];!u();)y.push(w());else for(y=Array(a),e=0;e<a;++e)y[e]=w();return y;case 5:y={};for(e=0;e<a||0>a&&!u();++e)h=w(),y[h]=w();return y;
case 6:return b(w());case 7:switch(a){case 20:return!1;case 21:return!0;case 22:return null;case 23:return v;default:return c()}}}var q=new DataView(a),B=0;"function"!==typeof b&&(b=function(a){return a});"function"!==typeof c&&(c=function(){return v});var h=w();if(B!==a.byteLength)throw"Remaining bytes";return h};c.encode=function(b){function c(a){for(var b=u.byteLength,c=g+a;b<c;)b*=2;if(b!==u.byteLength){c=n;u=new ArrayBuffer(b);n=new DataView(u);b=g+3>>2;for(var w=0;w<b;++w)n.setUint32(4*w,c.getUint32(4*
w))}m=a;return n}function d(a){c(1).setUint8(g,a);g+=m}function l(a){for(var b=c(a.length),w=0;w<a.length;++w)b.setUint8(g+w,a[w]);g+=m}function f(a,b){if(24>b)d(a<<5|b);else if(256>b)d(a<<5|24),d(b);else{if(65536>b)d(a<<5|25),c(2).setUint16(g,b);else if(4294967296>b)d(a<<5|26),c(4).setUint32(g,b);else{d(a<<5|27);a=b%e;b=(b-a)/e;var w=c(8);w.setUint32(g,b);w.setUint32(g+4,a)}g+=m}}function r(b){var w;if(!1===b)return d(244);if(!0===b)return d(245);if(null===b)return d(246);if(b===v)return d(247);
switch(a(b)){case "number":if(Math.floor(b)===b){if(0<=b&&b<=h)return f(0,b);if(-h<=b&&0>b)return f(1,-(b+1))}d(251);c(8).setFloat64(g,b);g+=m;break;case "string":var n=[];for(w=0;w<b.length;++w){var e=b.charCodeAt(w);128>e?n.push(e):(2048>e?n.push(192|e>>6):(55296>e?n.push(224|e>>12):(b.charCodeAt(++w),n.push(240|e>>18),n.push(128|e>>12&63)),n.push(128|e>>6&63)),n.push(128|e&63))}f(3,n.length);return l(new Uint8Array(n));default:if(Array.isArray(b))for(n=b.length,f(4,n),w=0;w<n;++w)r(b[w]);else if(b instanceof
Uint8Array)f(2,b.length),l(b);else if(b instanceof ArrayBuffer)b=new Uint8Array(b),f(2,b.length),l(b);else for(e=Object.keys(b),n=e.length,f(5,n),w=0;w<n;++w){var k=e[w];r(k);r(b[k])}}}var u=new ArrayBuffer(256),n=new DataView(u),m,g=0;r(b);if("slice"in u)return u.slice(0,g);b=new ArrayBuffer(g);for(var w=new DataView(b),y=0;y<g;++y)w.setUint8(y,n.getUint8(y));return b};var f=Math.pow(2,-24),e=Math.pow(2,32),h=Math.pow(2,53)},6390:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c.extractAuthenticatorDataFromAttestationObject=
function(a){return(0,f.decode)(a).authData};var f=a(6810)},7609:function(b,c,a){function f(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);b&&(g=g.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,g)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?f(Object(c),!0).forEach(function(b){(0,m.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(c)):f(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function h(a){var b=d();return function(){var c=(0,r.default)(a);if(b){var g=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,t.default)(this,c)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(G){return!1}}var k=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c.KatalMetricsDriverSushi=void 0;var q=k(a(6115)),l=k(a(1655)),t=k(a(4993)),r=k(a(3808)),u=k(a(6690)),n=k(a(9728)),m=k(a(8416));b=k(a(4864));var g=k(a(2952)),w=k(a(4873)),y={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"};a=function(){function a(){(0,u.default)(this,a);(0,m.default)(this,"context",{})}(0,n.default)(a,[{key:"withSushiClient",value:function(a){console.log("withSushi client...");
this.context.sushiClient=a;return this}},{key:"withDomainRealm",value:function(a,b){this.context.domain=a;this.context.realm=b;return this}},{key:"withCustomProducer",value:function(a){this.context.sushiProducer=a;return this}},{key:"withCustomSourceGroup",value:function(a){this.context.sourceGroupId=a;return this}},{key:"withErrorHandler",value:function(a){this.context.errorHandler=a;return this}},{key:"withSushiClientOptions",value:function(a){this.context.sushiClientOptions=a;return this}},{key:"withSushiClientTransportOverride",
value:function(a){this.context.sushiClientTransportOverride=a;return this}},{key:"build",value:function(){return new B(this.context)}}]);return a}();var B=function(a){function b(a){(0,u.default)(this,b);var g=c.call(this);(0,m.default)((0,q.default)(g),"sushi",void 0);(0,m.default)((0,q.default)(g),"producerId",void 0);(0,m.default)((0,q.default)(g),"sourceGroupId",void 0);(0,m.default)((0,q.default)(g),"errorHandler",void 0);(0,m.default)((0,q.default)(g),"combinedErrorHandler",function(a){if(g.errorHandler)try{g.errorHandler(a);
return}catch(E){console.error("Error handling error publishing metrics:"),console.error(E)}g.defaultErrorHandler(a)});var w=a.domain,n=a.realm,d=a.errorHandler,l=a.sushiProducer;l=void 0===l?"katal":l;var e=a.sushiClientOptions,k=a.sushiClientTransportOverride,f=a.sourceGroupId||y[w]||y.test;g.sushi=a.sushiClient||g.buildSushiClient(w,n,f,e,k);g.errorHandler=d;g.producerId=l;g.sourceGroupId=f;return g}(0,l.default)(b,a);var c=h(b);(0,n.default)(b,[{key:"beforeUnload",value:function(a){this.sushi.onSushiUnload(a)}},
{key:"defaultErrorHandler",value:function(a){console.error("Error publishing metrics:");console.error(a)}},{key:"withErrorHandling",value:function(a){try{return a()}catch(ca){this.combinedErrorHandler(ca)}}},{key:"buildSushiClient",value:function(a,c,g,m,n){if(!a||!c)throw Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new w.default(b.getRealmName(c),g,this.combinedErrorHandler,m,n)}},{key:"publish",value:function(a,b,c){var m=this,w=3>arguments.length?
arguments[1]:arguments[2];this.withErrorHandling(function(){if(g.default.List===a.type)a.metricList.forEach(function(a){m.publish(a,w)});else{var b=m.mapObjectTypeToNexusSchema(a.type),c=e(e({},w.context),{},{metricKey:a.name,value:a.value});a.isMonitor&&(c.isMonitor=!0);c.cloudWatchDimensions&&delete c.cloudWatchDimensions;m.sushi.reset();m.sushi.event(c,m.producerId,b,{ssd:1})}})}},{key:"mapObjectTypeToNexusSchema",value:function(a){switch(a){case g.default.String:return"katal.client.metrics.String.2";
case g.default.Counter:return"katal.client.metrics.Counter.3";case g.default.Timer:return"katal.client.metrics.Timer.2";default:throw Error("Unknown type ".concat(a," when publishing metric object."));}}}],[{key:"getRealmName",value:function(a){switch(a){case "NAAmazon":case "USAmazon":return w.default.REGIONS.NA;case "EUAmazon":return w.default.REGIONS.EU;case "FEAmazon":case "JPAmazon":return w.default.REGIONS.FE;case "CNAmazon":return w.default.REGIONS.CN;default:return a}}}]);return b}(b.default);
c.KatalMetricsDriverSushi=B;(0,m.default)(B,"Builder",a)},8277:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;a(6470);b=a(7609).KatalMetricsDriverSushi;c["default"]=b},7700:function(b,c,a){function f(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);b&&(g=g.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,g)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=
null!=arguments[b]?arguments[b]:{};b%2?f(Object(c),!0).forEach(function(b){(0,k.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):f(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(6690)),d=b(a(9728)),k=b(a(8416)),q=b(a(1051)),l=b(a(5292)),t=b(a(2721)),r=a(8184),u=a(1582),n=["site","serviceName",
"methodName"],m=function(){function a(){var b=0<arguments.length&&arguments[0]!==v?arguments[0]:{};(0,h.default)(this,a);this.context=e({},b)}(0,d.default)(a,[{key:"merge",value:function(b){if(!b)return this;if(b instanceof a.Builder)throw Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");b=b instanceof a?b.context:b;b=e(e(e({},this.context),b),{},{relatedMetrics:(0,r.mergeLists)(this.context.relatedMetrics,b.relatedMetrics),relatedMetricsSingleAction:(0,
r.mergeLists)(this.context.relatedMetricsSingleAction,b.relatedMetricsSingleAction),cloudWatchDimensions:(0,r.mergeLists)(this.context.cloudWatchDimensions,b.cloudWatchDimensions)});return new a(b)}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new a(e(e({},this.context),{},{relatedMetricsSingleAction:v}))}},{key:"driverContext",value:function(){var b=e({},this.context);delete b.relatedMetrics;delete b.relatedMetricsSingleAction;delete b.requestId;this.context.requestId&&(b.actionId=
(0,u.embedRequestId)(b.actionId,this.context.requestId));return new a(b)}},{key:"getFields",value:function(){return e({},this.context)}},{key:"validationError",value:function(){var a=this,b;return(b=(0,t.default)(n,function(b){if(a.context[b]==v)return Error("Field ".concat(b," is required, but it is ").concat(a.context[b]))}))?b:(0,t.default)(Object.keys(this.context),function(b){return a.validateField(b)})}},{key:"validateField",value:function(a){var b=this.context[a],c="field ".concat(a);switch(a){case "site":case "serviceName":if(-1<
b.indexOf("/"))return Error("Expected ".concat(c," to contain only valid characters, but it was ").concat(b,".  It cannot contain a slash."));case "methodName":case "actionId":return(0,q.default)(b,c);case "cloudWatchDimensions":return(0,l.default)(b||[])}}}]);return a}();c["default"]=m;(0,k.default)(m,"Builder",function(){function a(){(0,h.default)(this,a);(0,k.default)(this,"context",{})}(0,d.default)(a,[{key:"withSite",value:function(a){this.context.site=a;return this}},{key:"withServiceName",
value:function(a){this.context.serviceName=a;return this}},{key:"withMethodName",value:function(a){this.context.methodName=a;return this}},{key:"withActionId",value:function(a){this.context.actionId=a;return this}},{key:"withRequestId",value:function(a){this.context.requestId=a;return this}},{key:"withCloudWatchDimensions",value:function(a){this.context.cloudWatchDimensions=a;return this}},{key:"withRelatedMetrics",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];
this.context.relatedMetrics=b;return this}},{key:"addRelatedMetrics",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetrics=(0,r.mergeLists)(this.context.relatedMetrics,b);return this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetricsSingleAction=b;return this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var a=arguments.length,
b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.context.relatedMetricsSingleAction=(0,r.mergeLists)(this.context.relatedMetricsSingleAction,b);return this}},{key:"build",value:function(){return new m(this.context)}}]);return a}())},8142:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var f=b(a(6690)),e=b(a(9728)),h=b(a(8416)),d=b(a(1171)),k=b(a(7700)),q=a(5607),l=a(8184),t=a(5742),r=a(1582),u=function(a){console.error("Error publishing metrics:");console.error(a)};
a=function(){function a(b){var c=this,m=1<arguments.length&&arguments[1]!==v?arguments[1]:u,n=2<arguments.length&&arguments[2]!==v?arguments[2]:new k.default;(0,f.default)(this,a);(0,h.default)(this,"combinedErrorHandler",function(a){try{c.errorHandler(a)}catch(G){console.error("Error handling error publishing metrics:"),console.error(G),u(a)}});if(n instanceof k.default.Builder)throw Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");
this.driver=b;this.errorHandler=m;this.context=n instanceof k.default?n:new k.default(n)}(0,e.default)(a,[{key:"withErrorHandling",value:function(a){try{return a()}catch(g){this.combinedErrorHandler(g)}}},{key:"getAdditionalRelatedMetrics",value:function(a){a=a instanceof k.default?a.context:a;var b=this.getBaseRelatedMetrics();return(0,l.mergeLists)(b,a.relatedMetrics)}},{key:"getBaseRelatedMetrics",value:function(){return(0,l.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction)}},
{key:"publish",value:function(a){var b=this;this.withErrorHandling(function(){if(!a)throw Error("Cannot publish undefined/null metric object");if(q.Object.Types.List===a.type)a.metricList.forEach(function(a){b.publish(a)});else{var c=b.context.driverContext(),g=c.validationError();if(g)throw g;if(g=a.validationError())throw g;(0,t.dispatchMetricEvent)(a,c);b.driver.publish(a,c)}})}},{key:"newChildPublisher",value:function(b){return new a(this.driver,this.errorHandler,this.context.merge(b))}},{key:"newChildActionPublisher",
value:function(b){var c=this._generateActionid(b);c=this.context.withoutRelatedMetricsSingleAction().merge({actionId:c}).merge(b);var m=new a(this.driver,this.errorHandler,c);(b=!b||b instanceof k.default.Builder?this.getBaseRelatedMetrics():this.getAdditionalRelatedMetrics(b))&&b.forEach(function(a){m.publish(a)});return m}},{key:"newChildActionPublisherChained",value:function(a){var b=this._generateActionid(a),c=(0,r.embedRequestId)(b,this.context.context.requestId);c=[new q.String("parentActionId",
c)];a=(new k.default({actionId:b,relatedMetricsSingleAction:c})).merge(a);return this.newChildActionPublisher(a)}},{key:"newChildActionPublisherChainedForMethod",value:function(a,b){return this.newChildActionPublisherChained((new k.default({methodName:a})).merge(b))}},{key:"newChildActionPublisherForMethod",value:function(a,b){return this.newChildActionPublisher((new k.default({methodName:a})).merge(b))}},{key:"newChildActionPublisherForInitialization",value:function(a){return this.newChildActionPublisherForMethod("Initialization",
a)}},{key:"publishString",value:function(a,b){this.publish(new q.String(a,b))}},{key:"publishStringTruncate",value:function(a,b){a=new q.String(a,b);a.truncate=!0;this.publish(a)}},{key:"publishCounter",value:function(a,b){this.publish(new q.Counter(a,b))}},{key:"publishTimer",value:function(a,b){this.publish(new q.Timer(a,b))}},{key:"publishCounterMonitor",value:function(a,b){this.publish((new q.Counter(a,b)).withMonitor())}},{key:"publishTimerMonitor",value:function(a,b){this.publish((new q.Timer(a,
b)).withMonitor())}},{key:"_generateActionid",value:function(a){return a&&(a=a.context?a.context:a,a.actionId)?a.actionId:(0,d.default)()}}]);return a}();c["default"]=a},5274:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.DEFAULT_ERROR_HANDLER=void 0;c.DEFAULT_ERROR_HANDLER=function(a){throw a;}},4864:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var f=b(a(6690)),e=b(a(9728));a=function(){function a(){(0,f.default)(this,a)}(0,e.default)(a,
[{key:"publish",value:function(a,b){throw Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead");}}]);return a}();c["default"]=a},2721:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,b){var c=v;a.some(function(a){c=b(a);return null!=c});return c}},469:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;c["default"]=Object.values?Object.values:function(a){return Object.keys(a).map(function(b){return a[b]})}},
8059:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a,b){if("number"!==typeof a)return Error("Expected ".concat(b," to have type 'number', but it was type '").concat((0,f.default)(a),"'"));if(0>a)return Error("Expected ".concat(b," to be positive, but it was ").concat(a));if(!isFinite(a)||Math.floor(a)!==a)return Error("Expected ".concat(b," to be an integer, but it was ").concat(a))};var f=b(a(8698))},1051:function(b,c,a){b=a(4836);Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=function(a,b){if("string"!==typeof a)return Error("Expected ".concat(b," to be a string, but it was a ").concat((0,f.default)(a)));if(a.length>h)return Error("Expected ".concat(b," to be less than ").concat(h," characters, but it was ").concat(a.length," characters"));if(1>a.length)return Error("Expected ".concat(b," to be non-blank"));if(!e.test(a))return Error("Expected ".concat(b," to contain only valid characters, but it was ").concat(a,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};
var f=b(a(8698)),e=/^[A-Za-z0-9.:@_/-]+$/,h=127},1582:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.embedRequestId=function(a,b){return b?[b,a].join("::"):a}},8184:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c.mergeLists=function(a,b){return a||b?[].concat((0,f.default)(a||[]),(0,f.default)(b||[])):v};var f=b(a(861))},5742:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.dispatchMetricEvent=function(a,b){if("undefined"!==typeof x){if("function"===
typeof CustomEvent){var c=new CustomEvent("katal.metrics.publish",{detail:{metric:a,context:b.getFields()}});x.dispatchEvent(c)}(c=x.__KATAL_METRICS_EXTENSION__)&&c.publish(a,b.getFields())}}},5292:function(b,c,a){function f(a,b){if(a.length>k)return Error("Expected Dimension name for value ".concat(b," to be ").concat(k," characters or less, but it was ").concat(a.length," characters"));if(1>a.length)return Error("Expected Dimension name for value ".concat(b," to be non-blank"));if(!h.test(a))return Error("Expected Dimension name for value ".concat(b,
" to contain only ASCII characters, but it was ").concat(a));if(!d.test(a))return Error("Expected Dimension name for value ".concat(b," to contain at least one non whitespace character, but it was ").concat(a));if(a.startsWith(":"))return Error("Expected Dimension name for value ".concat(b,' to not start with a colon (":"), but it was ').concat(a));if(b.length>q)return Error("Expected Dimension value for name ".concat(a," to be ").concat(q," characters or less, but it was ").concat(b.length," characters"));
if(1>b.length)return Error("Expected Dimension value for name ".concat(a," to be non-blank"));if(!h.test(b))return Error("Expected Dimension value for name ".concat(a," to contain only ASCII characters, but it was ").concat(b));if(!d.test(b))return Error("Expected Dimension value for name ".concat(a," to contain at least one non whitespace character, but it was ").concat(b,"}"))}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a){return(0,e.default)(a,function(a){return f(a.name,
a.value)})};var e=b(a(2721)),h=/^[\x20-\x7E]+$/,d=/^.*\S+.*$/,k=255,q=1024},5989:function(b,c,a){function f(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(f=function(a){return a?c:b})(a)}b=a(4836);var e=a(8698);Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"CloudWatchDimensions",{enumerable:!0,get:function(){return t.CloudWatchDimensions}});Object.defineProperty(c,"Context",{enumerable:!0,get:function(){return k.default}});Object.defineProperty(c,
"ErrorHandler",{enumerable:!0,get:function(){return l.ErrorHandler}});c.Metric=void 0;Object.defineProperty(c,"MetricsDriver",{enumerable:!0,get:function(){return q.default}});Object.defineProperty(c,"Publisher",{enumerable:!0,get:function(){return d.default}});var h=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==e(a)&&"function"!==typeof a)return{default:a};if((b=f(b))&&b.has(a))return b.get(a);var c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in a)if("default"!==
g&&Object.prototype.hasOwnProperty.call(a,g)){var d=m?Object.getOwnPropertyDescriptor(a,g):null;d&&(d.get||d.set)?Object.defineProperty(c,g,d):c[g]=a[g]}c.default=a;b&&b.set(a,c);return c}(a(5607));c.Metric=h;var d=b(a(8142)),k=b(a(7700)),q=b(a(4864)),l=a(5274),t=a(1128)},199:function(b,c,a){function f(a){var b=e();return function(){var c=(0,t.default)(a);if(b){var m=(0,t.default)(this).constructor;c=Reflect.construct(c,arguments,m)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function e(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(6690)),d=b(a(9728)),k=b(a(1588)),q=b(a(1655)),l=b(a(4993)),t=b(a(3808)),r=b(a(8116)),u=b(a(8059));a=function(a){function b(a){var g=1<arguments.length&&arguments[1]!==v?arguments[1]:0;(0,h.default)(this,
b);var m=c.call(this,a);m.value=g;return m}(0,q.default)(b,a);var c=f(b);(0,d.default)(b,[{key:"value",get:function(){return this._value},set:function(a){this._value=Math.round(a)}},{key:"type",get:function(){return r.default.Types.Counter}},{key:"add",value:function(a){this.value+=a}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var a=(0,k.default)((0,t.default)(b.prototype),"validationError",this).call(this);return a?a:(0,u.default)(this.value,"field value in Counter metrics object '".concat(this.name,
"'"))}}]);return b}(r.default);c["default"]=a},6673:function(b,c,a){function f(a){var b=e();return function(){var c=(0,t.default)(a);if(b){var m=(0,t.default)(this).constructor;c=Reflect.construct(c,arguments,m)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}
var h=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var d=h(a(6690)),k=h(a(9728)),q=h(a(1655)),l=h(a(4993)),t=h(a(3808));b=h(a(8416));var r=h(a(4053)),u=h(a(2545));a=function(a){function b(a){(0,d.default)(this,b);return c.call(this,"".concat(b.HTTP_REQUEST_PREFIX,".").concat(a))}(0,q.default)(b,a);var c=f(b);(0,k.default)(b,[{key:"url",get:function(){return this.getNamedMetricValue(b.URL_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.URL_SUFFIX,u.default,
a)}},{key:"urlMetric",get:function(){return this.getNamedMetric(b.URL_SUFFIX)}},{key:"statusCode",get:function(){return this.getNamedMetricValue(b.STATUS_CODE_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.STATUS_CODE_SUFFIX,u.default,a)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(b.STATUS_CODE_SUFFIX)}},{key:"statusText",get:function(){return this.getNamedMetricValue(b.STATUS_TEXT_SUFFIX)},set:function(a){this.setOrDeleteNamedMetricValue(b.STATUS_TEXT_SUFFIX,
u.default,a)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(b.STATUS_TEXT_SUFFIX)}}]);return b}(r.default);c["default"]=a;(0,b.default)(a,"HTTP_REQUEST_PREFIX","HTTPRequest");(0,b.default)(a,"URL_SUFFIX","URL");(0,b.default)(a,"STATUS_CODE_SUFFIX","StatusCode");(0,b.default)(a,"STATUS_TEXT_SUFFIX","StatusText")},21:function(b,c,a){function f(a){var b=e();return function(){var c=(0,l.default)(a);if(b){var n=(0,l.default)(this).constructor;c=Reflect.construct(c,arguments,n)}else c=
c.apply(this,arguments);return(0,q.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var h=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var d=h(a(6690)),k=h(a(1655)),q=h(a(4993)),l=h(a(3808));b=h(a(8416));a=function(a){function b(){(0,d.default)(this,b);return c.call(this,
b.INITIALIZE_METRIC_NAME)}(0,k.default)(b,a);var c=f(b);return b}(h(a(4053)).default);c["default"]=a;(0,b.default)(a,"INITIALIZE_METRIC_NAME","Initialization")},8981:function(b,c,a){function f(a){var b=e();return function(){var c=(0,l.default)(a);if(b){var g=(0,l.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,q.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;
try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(6690)),d=b(a(9728)),k=b(a(1655)),q=b(a(4993)),l=b(a(3808)),t=b(a(124)),r=b(a(469));a=function(a){function b(a){(0,h.default)(this,b);a=c.call(this,a);a.namedMetrics={};return a}(0,k.default)(b,a);var c=f(b);(0,d.default)(b,[{key:"metricList",get:function(){return(0,r.default)(this.namedMetrics)}},{key:"setNamedMetric",
value:function(a,b){var c=this.getNameForSubMetric(a);b=b(c);b.canMonitor&&(b.isMonitor=this.isMonitor);this.namedMetrics[a]=b}},{key:"setOrDeleteNamedMetricValue",value:function(a,b,c){c==v?this.deleteNamedMetric(a):this.getOrCreateNamedMetric(a,function(a){return new b(a,c)}).value=c}},{key:"getOrCreateNamedMetric",value:function(a,b){this.namedMetrics[a]||this.setNamedMetric(a,b);return this.namedMetrics[a]}},{key:"getNamedMetric",value:function(a){return this.namedMetrics[a]}},{key:"deleteNamedMetric",
value:function(a){delete this.namedMetrics[a]}},{key:"getNamedMetricValue",value:function(a){return(a=this.getNamedMetric(a))?a.value:v}},{key:"getNameForSubMetric",value:function(a){return"".concat(this.name,".").concat(a)}}]);return b}(t.default);c["default"]=a},8116:function(b,c,a){var f=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var e=f(a(8698)),h=f(a(6690)),d=f(a(9728));b=f(a(8416));var k=f(a(1051));a=f(a(2952));f=function(){function a(b){(0,h.default)(this,
a);this._name=b;this._isMonitor=!1}(0,d.default)(a,[{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"withMonitor",value:function(){this.isMonitor=0<arguments.length&&arguments[0]!==v?arguments[0]:!0;return this}},{key:"isMonitor",get:function(){return this._isMonitor},set:function(a){this._isMonitor=!!a}},{key:"canMonitor",get:function(){throw Error("Subclass of KatalMetricObject must implement canMonitor");}},{key:"type",get:function(){throw Error("Subclass of KatalMetricObject must implement type getter");
}},{key:"validationError",value:function(){return this.isMonitor!==v&&"boolean"!==typeof this.isMonitor?Error("Field isMonitor should be a boolean, but it was a ".concat((0,e.default)(this.isMonitor))):(0,k.default)(this.name,"field name")}}]);return a}();c["default"]=f;(0,b.default)(f,"Types",a.default)},124:function(b,c,a){function f(a){var b=e();return function(){var c=(0,r.default)(a);if(b){var g=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);
return(0,t.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(m){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(6690)),d=b(a(9728)),k=b(a(1588)),q=b(a(3788)),l=b(a(1655)),t=b(a(4993)),r=b(a(3808)),u=b(a(8116)),n=b(a(2721));a=function(a){function b(a){(0,
h.default)(this,b);return c.call(this,a)}(0,l.default)(b,a);var c=f(b);(0,d.default)(b,[{key:"metricList",get:function(){throw Error("Subclass of KatalMetricObjectList must implement metricList getter");}},{key:"isMonitor",get:function(){return(0,k.default)((0,r.default)(b.prototype),"isMonitor",this)},set:function(a){(0,q.default)((0,r.default)(b.prototype),"isMonitor",a,this,!0);this.metricList.forEach(function(b){b.canMonitor&&(b.isMonitor=a)})}},{key:"canMonitor",get:function(){return!0}},{key:"type",
get:function(){return u.default.Types.List}},{key:"validationError",value:function(){return(0,n.default)(this.metricList,function(a){return a.validationError()})}}]);return b}(u.default);c["default"]=a},2545:function(b,c,a){function f(a){var b=e();return function(){var c=(0,u.default)(a);if(b){var g=(0,u.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,r.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(8698)),d=b(a(6690)),k=b(a(9728)),q=b(a(6115)),l=b(a(1588)),t=b(a(1655)),r=b(a(4993)),u=b(a(3808)),n=b(a(8416)),m=b(a(8116));a=function(a){function b(a,g){(0,d.default)(this,b);a=c.call(this,a);(0,n.default)((0,q.default)(a),"truncate",!1);a.value=g;return a}(0,t.default)(b,
a);var c=f(b);(0,k.default)(b,[{key:"value",get:function(){return this._value},set:function(a){if("number"===typeof a||"boolean"===typeof a)a=a.toString();this._value=a}},{key:"type",get:function(){return m.default.Types.String}},{key:"canMonitor",get:function(){return!1}},{key:"validationError",value:function(){var a=(0,l.default)((0,u.default)(b.prototype),"validationError",this).call(this);if(a)return a;if("string"!==typeof this.value)return Error("Expected field value in String metrics object '".concat(this.name,
"' to be type string, but it was ").concat((0,h.default)(this.value)));if(this.value.length>b.MAX_SIZE)if(this.truncate)this.value=this.value.substring(0,b.MAX_SIZE);else return Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(b.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."))}}]);return b}(m.default);c["default"]=a;(0,n.default)(a,"MAX_SIZE",256)},4053:function(b,c,a){function f(a){var b=e();return function(){var c=
(0,t.default)(a);if(b){var g=(0,t.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(m){return!1}}var h=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var d=h(a(6690)),k=
h(a(9728)),q=h(a(1655)),l=h(a(4993)),t=h(a(3808));b=h(a(8416));var r=h(a(8981)),u=h(a(4392)),n=h(a(199));a=function(a){function b(a){(0,d.default)(this,b);a=c.call(this,a);a.setNamedMetric(b.LATENCY_SUFFIX,function(a){return new u.default(a)});a.setNamedMetric(b.FAILURE_SUFFIX,function(a){return new n.default(a,1)});return a}(0,q.default)(b,a);var c=f(b);(0,k.default)(b,[{key:"setFailure",value:function(){this.failureMetric.value=(0<arguments.length&&arguments[0]!==v?arguments[0]:1)?1:0}},{key:"setSuccess",
value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(a){this.latencyMetric.value=a}},{key:"latencyMetric",get:function(){return this.getNamedMetric(b.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(b.FAILURE_SUFFIX)}}]);return b}(r.default);c["default"]=a;(0,b.default)(a,"LATENCY_SUFFIX","Latency");(0,b.default)(a,"FAILURE_SUFFIX","Failure")},1741:function(b,c,a){function f(a){var b=e();return function(){var c=(0,t.default)(a);if(b){var n=(0,t.default)(this).constructor;
c=Reflect.construct(c,arguments,n)}else c=c.apply(this,arguments);return(0,l.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(6690)),d=b(a(9728)),k=b(a(1588)),q=b(a(1655)),l=b(a(4993)),t=b(a(3808)),r=
b(a(8116)),u=b(a(8059));a=function(a){function b(a,g){(0,h.default)(this,b);a=c.call(this,a);a.value=g;return a}(0,q.default)(b,a);var c=f(b);(0,d.default)(b,[{key:"value",get:function(){return this._value},set:function(a){this._value=a==v?a:Math.round(a)}},{key:"type",get:function(){return r.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}},{key:"validationError",value:function(){var a=(0,k.default)((0,t.default)(b.prototype),"validationError",this).call(this);return a?a:(0,u.default)(this.value,
"field value in Timer metrics object '".concat(this.name,"'"))}}]);return b}(r.default);c["default"]=a},4392:function(b,c,a){function f(a){var b=e();return function(){var c=(0,r.default)(a);if(b){var g=(0,r.default)(this).constructor;c=Reflect.construct(c,arguments,g)}else c=c.apply(this,arguments);return(0,t.default)(this,c)}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(u){return!1}}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(6690)),d=b(a(9728)),k=b(a(3788)),q=b(a(1588)),l=b(a(1655)),t=b(a(4993)),r=b(a(3808));a=function(a){function b(a,d){(0,h.default)(this,b);a=c.call(this,a,v);a.start(d);a._value=v;return a}(0,l.default)(b,a);var c=f(b);(0,d.default)(b,[{key:"start",value:function(a){this._startTime=a||this.now()}},{key:"stop",value:function(a){return this._stopTime=a||this.now()}},{key:"isStopped",
get:function(){return this._stopTime!==v}},{key:"value",get:function(){(0,q.default)((0,r.default)(b.prototype),"value",this)===v&&(this.isStopped||this.stop(),(0,k.default)((0,r.default)(b.prototype),"value",this.stopTime-this.startTime,this,!0));return(0,q.default)((0,r.default)(b.prototype),"value",this)},set:function(a){(0,k.default)((0,r.default)(b.prototype),"value",a,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}},{key:"now",
value:function(){return performance.now()}}]);return b}(b(a(1741)).default);c["default"]=a},2952:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var a;b=a||(a={});b.String="String";b.Counter="Counter";b.Timer="Timer";b.List="List";c["default"]=a},5607:function(b,c,a){b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"Counter",{enumerable:!0,get:function(){return h.default}});Object.defineProperty(c,"HttpRequest",{enumerable:!0,get:function(){return t.default}});
Object.defineProperty(c,"Initialization",{enumerable:!0,get:function(){return l.default}});Object.defineProperty(c,"Object",{enumerable:!0,get:function(){return f.default}});Object.defineProperty(c,"String",{enumerable:!0,get:function(){return e.default}});Object.defineProperty(c,"TimedAttempt",{enumerable:!0,get:function(){return q.default}});Object.defineProperty(c,"Timer",{enumerable:!0,get:function(){return d.default}});Object.defineProperty(c,"TimerStopwatch",{enumerable:!0,get:function(){return k.default}});
var f=b(a(8116)),e=b(a(2545)),h=b(a(199)),d=b(a(1741)),k=b(a(4392)),q=b(a(4053)),l=b(a(21)),t=b(a(6673))},1128:function(b,c){Object.defineProperty(c,"__esModule",{value:!0})},4873:function(b,c,a){function f(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:
{};b%2?f(c,!0).forEach(function(b){(0,h.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):f(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}b=a(4836);Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var h=b(a(8416)),d=b(a(6690)),k=b(a(9728));a=function(){function a(){var b=0<arguments.length&&arguments[0]!==v?arguments[0]:a.REGIONS.NA,c=1<arguments.length?arguments[1]:
v,k=2<arguments.length?arguments[2]:v,e=3<arguments.length&&arguments[3]!==v?arguments[3]:{},n=4<arguments.length?arguments[4]:v;(0,d.default)(this,a);b=a.createSushiUrl(b,c);e=a.createCsmUserContext(b,e);this.ue_csm=this.setupMockCSMObject(e);this.encapsulatedWindow=this.setupMockWindow(this.ue_csm);this.transportationClientCode(this.ue_csm,x);n&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(a,b){n(a,b);return!0}});this.clientCode(this.ue_csm,this.encapsulatedWindow);this.errorHandler=k}(0,
k.default)(a,null,[{key:"createSushiUrl",value:function(b,c){if(!c)throw Error("Sushi Driver was not provided with a source group.");switch(b){case a.REGIONS.NA:b="unagi-na";break;case a.REGIONS.EU:b="unagi-eu";break;case a.REGIONS.FE:b="unagi-fe";break;case a.REGIONS.CN:b="unagi-cn";break;default:throw Error("Unrecognized region '".concat(b,"' provided to SushiClient."));}return"https://".concat(b,".amazon.com/1/events/").concat(c)}},{key:"createCsmUserContext",value:function(a){return e({hiPriFlushInterval:1E3,
lowPriFlushInterval:1E4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:v,errorHandlerFunction:console.log,sushiUrl:a},1<arguments.length&&arguments[1]!==v?arguments[1]:{})}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]);(0,k.default)(a,[{key:"event",value:function(a,b,c,d){4<arguments.length&&arguments[4]!==v&&arguments[4]&&console.log("SushiClient wrapper publishing the following:",{data:a,producerId:b,schemaId:c,options:d});return this.ue_csm.ue.event(a,b,c,
d)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(a){this.ue_csm.ue.onSushiFlush(a)}},{key:"onSushiUnload",value:function(a){this.ue_csm.ue.onSushiUnload(a)}},{key:"setupMockCSMObject",value:function(a){var b=this;return{ue_hpsi:a.hiPriFlushInterval,ue_lpsi:a.lowPriFlushInterval,ue:{ssw:a.sessionStorageWrapper,log:function(a,c){b.errorHandler?b.errorHandler(a):console.log("An error has occurred in SushiClient channel "+c,a)},exec:function(a,b){return a},
event:function(a,b,c){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(a,b,c){c=c||x;x.EventTarget&&x.EventTarget.prototype&&x.EventTarget.prototype.addEventListener?x.EventTarget.prototype.addEventListener.call(c,a,b,!!x.ue_clf):c.addEventListener?c.addEventListener(a,b,!!x.ue_clf):c.attachEvent&&c.attachEvent("on"+a,b)}},ueLogError:a.errorHandlerFunction,ue_surl:a.sushiUrl,ue_id:a.requestId,ue_err_chan:a.errorChannel}}},{key:"setupMockWindow",value:function(a){return{ue_csm:a,
ueLogError:a.ueLogError,ue:a.ue,setTimeout:function(a,b){return x.setTimeout(a,b)}}}},{key:"clientCode",value:function(a,b){a.ue.exec(function(a,b){function c(){for(var a=0;a<arguments.length;a++){var c=arguments[a];try{if(c.isSupported){var g=T.buildPayload(E,C);var d=c.send(F,g)}else throw dummyException;return d}catch(ta){}}v({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},b.ue_err_chan||"jserr")}function d(){if(C.length){for(var a=
0;a<L.length;a++)L[a]();c(p._sBcn||{},p._ajx||{});C=[];I={};E={};V=W=D=X=0}}function g(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}function k(a){try{return JSON.stringify(a)}catch(sa){}return null}function e(c,e,f,n){var m=!1;n=n||{};M++;
M==q&&v({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},b.ue_err_chan||"jserr");var h;if(h=!(M>=q))(h=c&&-1<c.constructor.toString().indexOf("Object")&&e&&-1<e.constructor.toString().indexOf("String")&&f&&-1<f.constructor.toString().indexOf("String"))||Y++;h&&(p.count&&p.count("Event:"+f,1),c.producerId=c.producerId||e,c.schemaId=c.schemaId||f,c.timestamp=g(),e=Date.now?Date.now():+new Date,f=Math.random().toString().substring(2,
12),c.messageId=a.ue_id+"-"+e+"-"+f,n&&!n.ssd&&(c.sessionId=c.sessionId||a.ue_sid,c.requestId=c.requestId||a.ue_id,c.obfuscatedMarketplaceId=c.obfuscatedMarketplaceId||a.ue_mid),(e=k(c))?(e=e.length,(C.length==u||D+e>r)&&d(),D+=e,c={data:T.compressEvent(c)},C.push(c),(n||{}).n?0===ha?d():V||(V=b.setTimeout(d,ha)):W||(W=b.setTimeout(d,la)),m=!0):m=!1);!m&&a.ue_int&&console.error("Invalid JS Nexus API call");return m}function f(){if(!ia){for(var b=0;b<J.length;b++)J[b]();for(b=0;b<L.length;b++)L[b]();
C.length&&(a.ue_sbuimp&&a.ue&&a.ue.ssw&&(b=k({dct:E,evt:C}),a.ue.ssw("eeldata",b),a.ue.ssw("eelsts","unk")),c(p._sBcn||{}));ia=!0}}function h(a){J.push(a)}function l(a){L.push(a)}var q=1E3,u=499,r=524288,t=function(){},p=a.ue||{},v=p.log||t,x=a.uex||t;(a.uet||t)("bb","ue_sushi_v1",{wb:1});var F=a.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",O=["messageId","timestamp"],C=[],I={},E={},D=0,X=0,Y=0,M=0,J=[],L=[],ia=!1,V,W,ha=void 0===a.ue_hpsi?1E3:a.ue_hpsi,la=void 0===
a.ue_lpsi?1E4:a.ue_lpsi,T=function(){function a(a){I[a]="#"+X++;E[I[a]]=a;return I[a]}function b(c){if(!(c instanceof Function)){if(c instanceof Array){for(var g=[],d=c.length,e=0;e<d;e++)g[e]=b(c[e]);return g}if(c instanceof Object){g={};for(d in c)c.hasOwnProperty(d)&&(g[I[d]?I[d]:a(d)]=-1===O.indexOf(d)?b(c[d]):c[d]);return g}return"string"===typeof c&&(c.length>("#"+X).length||"#"===c.charAt(0))?I[c]?I[c]:a(c):c}}return{compressEvent:b,buildPayload:function(){return k({cs:{dct:E},events:C})}}}();
(function(){if(p.event&&p.event.isStub){if(a.ue_sbuimp&&a.ue&&a.ue.ssw){var b=a.ue.ssw("eelsts").val;if(b&&"unk"===b&&(b=a.ue.ssw("eeldata").val)){a:{try{var c=JSON.parse(b);break a}catch(U){}c=null}c&&c.evt instanceof Array&&c.dct instanceof Object&&(C=c.evt,E=c.dct,C&&E&&(d(),a.ue.ssw("eeldata","{}"),a.ue.ssw("eelsts","scs")))}}p.event.replay(function(a){a[3]=a[3]||{};a[3].n=1;e.apply(this,a)});p.onSushiUnload.replay(function(a){h(a[0])});p.onSushiFlush.replay(function(a){l(a[0])})}})();p.attach("beforeunload",
f);p.attach("pagehide",f);p._cmps=T;p.event=e;p.event.reset=function(){M=0};p.onSushiUnload=h;p.onSushiFlush=l;try{b.P&&b.P.register&&b.P.register("sushi-client",t)}catch(Q){a.ueLogError(Q,{logLevel:"WARN"})}x("ld","ue_sushi_v1",{wb:1})},"Nxs-JS-Client")(a,b)}},{key:"transportationClientCode",value:function(a,b){a.ue.exec(function(a,b){var c=function(){},d=function(){return{send:function(a,g){if(g&&a){if(b.XDomainRequest){var d=new XDomainRequest;d.onerror=c;d.ontimeout=c;d.onprogress=c;d.onload=
c;d.timeout=0}else if(b.XMLHttpRequest){if(d=new XMLHttpRequest,!("withCredentials"in d))throw"";}else d=void 0;if(!d)throw"";d.open("POST",a,!0);d.setRequestHeader&&d.setRequestHeader("Content-type","text/plain");d.send(g)}},isSupported:!0}}(),g=function(){return{send:function(b,c){if(b&&c)if(navigator.sendBeacon(b,c))a.ue_sbuimp&&a.ue&&a.ue.ssw&&a.ue.ssw("eelsts","scs");else throw"";},isSupported:!!navigator.sendBeacon&&!(b.cordova&&b.cordova.platformId&&"ios"==b.cordova.platformId)}}();a.ue._ajx=
d;a.ue._sBcn=g},"Transportation-clients")(a,b)}}]);return a}();c["default"]=a},9384:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.GetNativeInfoErrorCode=c.ErrorCode=void 0;c.createErrorResult=function(a,b){return{errorCode:a,errorDetails:{message:b}}};c.createErrorResultForGetNativeInfo=function(a,b){return{errorCode:a,errorDetails:b}};b=function(a){a.UNSUPPORTED_PLATFORM="Unsupported_Platform";a.UNSUPPORTED_MAP_VERSION="Unsupported_MAP_Version";a.INVALID_INPUT="Invalid_Input";
a.TIMEOUT_ERROR="Timeout_Error";a.MALFORMED_RESPONSE="Malformed_Response";return a}({});c.ErrorCode=b;b=function(a){a.INTERNAL_ERROR="Internal_Error";a.UNSUPPORTED_PLATFORM="Unsupported_Platform";a.TIMEOUT_ERROR="Timeout_Error";a.MALFORMED_RESPONSE="Malformed_Response";return a}({});c.GetNativeInfoErrorCode=b},8769:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},a(b)}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&e(a,b)}function e(a,b){e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=
b;return a};return e(a,b)}function h(b){var c=d();return function(){var d=k(b);if(c){var e=k(this).constructor;d=Reflect.construct(d,arguments,e)}else d=d.apply(this,arguments);if(!d||"object"!==a(d)&&"function"!==typeof d){if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=this}return d}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||
Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return k(a)}function q(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,t(d.key),d)}}function l(a,b,c){b&&
q(a.prototype,b);c&&q(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function t(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==v){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}function r(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=c.PlatformInfo=
c.MapInfo=c.GetNativeInfoAPIResponse=c.GetNativeInfoAPIErrorResponse=c.AppInfo=void 0;b=l(function m(){r(this,m)});c.GetNativeInfoAPIResponse=b;var u=l(function y(a,b){r(this,y);this.identifier=a;this.version=b});c.AppInfo=u;u=l(function G(a,b,c){r(this,G);this.name=a;this.version=b;this.manufacturer=c});c.PlatformInfo=u;u=l(function G(a,b){r(this,G);this.mapVersion=a;this.jsVersion=b});c.MapInfo=u;u=function(a){function b(a,d,e,k){r(this,b);var f=c.call(this);f._appInfo=a;f._platformInfo=d;f._mapInfo=
e;f._jsBridgeVersion=k;return f}f(b,a);var c=h(b);l(b,[{key:"appInfo",get:function(){return this._appInfo},set:function(a){this._appInfo=a}},{key:"platformInfo",get:function(){return this._platformInfo},set:function(a){this._platformInfo=a}},{key:"mapInfo",get:function(){return this._mapInfo},set:function(a){this._mapInfo=a}},{key:"jsBridgeVersion",get:function(){return this._jsBridgeVersion},set:function(a){this._jsBridgeVersion=a}}]);return b}(b);c["default"]=u;b=function(a){function b(a){r(this,
b);var d=c.call(this);d._error=a;return d}f(b,a);var c=h(b);l(b,[{key:"error",get:function(){return this._error},set:function(a){this._error=a}}]);return b}(b);c.GetNativeInfoAPIErrorResponse=b},3931:function(b,c,a){function f(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(f=function(a){return a?c:b})(a)}function e(a){return a&&a.__esModule?a:{"default":a}}function h(a){"@babel/helpers - typeof";return h="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?
function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},h(a)}function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,q(d.key),d)}}function k(a,b,c){b&&d(a.prototype,b);c&&d(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function q(a){a:if("object"===
h(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==h(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===h(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var l=a(5645),t=a(9384),r=e(a(1029)),u=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==h(a)&&"function"!==typeof a)return{"default":a};if((b=f(b))&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&
Object.getOwnPropertyDescriptor,g;for(g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var e=d?Object.getOwnPropertyDescriptor(a,g):null;e&&(e.get||e.set)?Object.defineProperty(c,g,e):c[g]=a[g]}c["default"]=a;b&&b.set(a,c);return c}(a(8769)),n=e(a(7221)),m=e(a(9933)),g=a(1071),w=e(a(4145));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}k(a,[{key:"apiCall",value:function(a){var b=this;console.log("Calling ".concat(a.namespace,
".").concat(a.method));return new Promise(function(c,d){w["default"].getInstance().nativeCall(a,function(d){b.isSuccessResult(d)?(d=new m["default"](a.namespace,a.method,d,v),c(d)):(d=new m["default"](a.namespace,a.method,v,d),c(d))})})}},{key:"getMinVersionForFeature",value:function(a,b){if(a in g.minVersionConfig.features){var c=g.minVersionConfig.features[a].versions;if(b in c)return c=c[b],new r["default"](a,b,c.minMAPAndroidJSBridgeVersion,c.minMAPiOSJSBridgeVersion)}return null}},{key:"getNativeInfo",
value:function(){var a=this,b=new n["default"](l.COMMON_NAMESPACE,"getNativeInfo",{timeout:l.TIMEOUT_LOCAL_IN_MILLISECONDS});return new Promise(function(c,d){a.apiCall(b).then(function(b){if(b)if(b.error)b=new u.GetNativeInfoAPIErrorResponse(a.mapNativeError(b.error)),d(b);else if(b.apiResult){var g=JSON.parse(JSON.stringify(b.apiResult));b=new u["default"](g.appInfo,g.platformInfo,g.mapInfo,b.apiResult.jsBridgeVersion);c(b)}})["catch"](function(a){a=new u.GetNativeInfoAPIErrorResponse((0,t.createErrorResultForGetNativeInfo)(t.GetNativeInfoErrorCode.INTERNAL_ERROR,
{message:"apiCall Error"}));d(a)})})}},{key:"mapNativeError",value:function(a){switch(a.errorCode){case t.ErrorCode.UNSUPPORTED_PLATFORM:return(0,t.createErrorResultForGetNativeInfo)(t.GetNativeInfoErrorCode.UNSUPPORTED_PLATFORM,a.errorDetails);case t.ErrorCode.TIMEOUT_ERROR:return(0,t.createErrorResultForGetNativeInfo)(t.GetNativeInfoErrorCode.TIMEOUT_ERROR,a.errorDetails);case t.ErrorCode.MALFORMED_RESPONSE:return(0,t.createErrorResultForGetNativeInfo)(t.GetNativeInfoErrorCode.MALFORMED_RESPONSE,
a.errorDetails);default:return(0,t.createErrorResultForGetNativeInfo)(t.GetNativeInfoErrorCode.INTERNAL_ERROR,a.errorDetails)}}},{key:"isSuccessResult",value:function(a){return"errorCode"in a&&"errorDetails"in a?!1:!0}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a);return a.instance}}]);return a}();c["default"]=b},1029:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?
"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},a(b)}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,h(d.key),d)}}function e(a,b,c){b&&f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function h(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];
if(c!==v){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=c.Feature=void 0;b=function(a){a.PASSKEY="passkey";return a}({});c.Feature=b;b=function(){function a(b,c,d,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._feature=b;this._featureVersion=c;this._minMAPAndroidJsBridgeVersion=d;
this._minMAPiOSJsBridgeVersion=e}e(a,[{key:"minMAPAndroidJsBridgeVersion",get:function(){return this._minMAPAndroidJsBridgeVersion}},{key:"minMAPiOSJsBridgeVersion",get:function(){return this._minMAPiOSJsBridgeVersion}},{key:"featureVersion",get:function(){return this._featureVersion}},{key:"feature",get:function(){return this._feature}}]);return a}();c["default"]=b},7221:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===
typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},a(b)}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,h(d.key),d)}}function e(a,b,c){b&&f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function h(b){a:if("object"===a(b)&&null!==b){var c=
b[Symbol.toPrimitive];if(c!==v){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(b,c,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._namespace=b;this._method=c;this._paramObject=d}e(a,[{key:"namespace",get:function(){return this._namespace},set:function(a){this._namespace=
a}},{key:"method",get:function(){return this._method},set:function(a){this._method=a}},{key:"paramObject",get:function(){return this._paramObject},set:function(a){this._paramObject=a}}]);return a}();c["default"]=b},9933:function(b,c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":
"undefined"===typeof a?"undefined":p(a)},a(b)}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,h(d.key),d)}}function e(a,b,c){b&&f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function h(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==v){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(b,c,d,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._namespaceCalled=b;this._methodCalled=c;this._apiResult=d;this._error=e}e(a,[{key:"namespaceCalled",get:function(){return this._namespaceCalled},set:function(a){this._namespaceCalled=a}},{key:"methodCalled",get:function(){return this._methodCalled},set:function(a){this._methodCalled=
a}},{key:"apiResult",get:function(){return this._apiResult},set:function(a){this._apiResult=a}},{key:"error",get:function(){return this._error},set:function(a){this._error=a}}]);return a}();c["default"]=b},1071:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.minVersionConfig=void 0;c.minVersionConfig={features:{passkey:{versions:{1:{minMAPAndroidJSBridgeVersion:1,minMAPiOSJSBridgeVersion:1}}}}}},5177:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&
"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a){if("function"!==typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}function h(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==f(a)&&"function"!==typeof a)return{"default":a};if((b=e(b))&&b.has(a))return b.get(a);
var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor,h;for(h in a)if("default"!==h&&Object.prototype.hasOwnProperty.call(a,h)){var n=d?Object.getOwnPropertyDescriptor(a,h):null;n&&(n.get||n.set)?Object.defineProperty(c,h,n):c[h]=a[h]}c["default"]=a;b&&b.set(a,c);return c}Object.defineProperty(c,"__esModule",{value:!0});Object.defineProperty(c,"APIParamObject",{enumerable:!0,get:function(){return l.APIParamObject}});Object.defineProperty(c,"APIResult",{enumerable:!0,get:function(){return t.APIResult}});
Object.defineProperty(c,"ErrorCode",{enumerable:!0,get:function(){return d.ErrorCode}});Object.defineProperty(c,"ErrorResult",{enumerable:!0,get:function(){return d.ErrorResult}});Object.defineProperty(c,"Feature",{enumerable:!0,get:function(){return k.Feature}});Object.defineProperty(c,"FeatureMinVersion",{enumerable:!0,get:function(){return k["default"]}});Object.defineProperty(c,"GetNativeInfoAPIErrorResponse",{enumerable:!0,get:function(){return q.GetNativeInfoAPIErrorResponse}});Object.defineProperty(c,
"GetNativeInfoAPIResponse",{enumerable:!0,get:function(){return q.GetNativeInfoAPIResponse}});Object.defineProperty(c,"GetNativeInfoAPISuccessResponse",{enumerable:!0,get:function(){return q["default"]}});Object.defineProperty(c,"GetNativeInfoErrorCode",{enumerable:!0,get:function(){return d.GetNativeInfoErrorCode}});Object.defineProperty(c,"MAPNativeJSInterface",{enumerable:!0,get:function(){return r["default"]}});Object.defineProperty(c,"MOBINamespace",{enumerable:!0,get:function(){return l.MOBINamespace}});
Object.defineProperty(c,"NativeJsInterfaceAPIRequest",{enumerable:!0,get:function(){return l["default"]}});Object.defineProperty(c,"NativeJsInterfaceAPIResponse",{enumerable:!0,get:function(){return t["default"]}});var d=a(9384),k=h(a(1029)),q=h(a(8769)),l=h(a(7221)),t=h(a(9933)),r=function(a){return a&&a.__esModule?a:{"default":a}}(a(3931))},7525:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===
typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,d(g.key),g)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function d(a){a:if("object"===f(a)&&null!==a){var b=
a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==f(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===f(a)?a:String(a)}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&q(a,b)}function q(a,b){q=Object.setPrototypeOf?
Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return q(a,b)}function l(a){var b=t();return function(){var c=r(a);if(b){var d=r(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);if(!c||"object"!==f(c)&&"function"!==typeof c){if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}}function t(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}function r(a){r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return r(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
return c.apply(this,arguments)}k(b,a);var c=l(b);h(b,[{key:"isAPIAvailable",value:function(a){var b=x[a.namespace];return"undefined"!==typeof b&&"function"===typeof b[a.method]?!0:!1}},{key:"apiCall",value:function(a){x&&x[a.namespace]&&x[a.namespace][a.method]&&"function"===typeof x[a.namespace][a.method]&&(console.log("Calling native bridge API on android: ".concat(JSON.stringify(a.paramObject))),x[a.namespace][a.method](this.encodeObject(a.paramObject)))}}]);return b}(function(a){return a&&a.__esModule?
a:{"default":a}}(a(4072))["default"]);c["default"]=b},7802:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&
(e.writable=!0);Object.defineProperty(a,d(e.key),e)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function d(a){a:if("object"===f(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==f(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===f(a)?a:String(a)}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&q(a,b)}function q(a,b){q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return q(a,b)}function l(a){var b=t();return function(){var c=r(a);if(b){var d=r(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);if(!c||"object"!==f(c)&&"function"!==typeof c){if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");
if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}}function t(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function r(a){r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return r(a)}
Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var u=a(9384);b=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");return c.apply(this,arguments)}k(b,a);var c=l(b);h(b,[{key:"isAPIAvailable",value:function(a){return!0}},{key:"apiCall",value:function(a){console.log("".concat(a.namespace,".").concat(a.method," on unsupported version or platform. return error message."));x.mapJSCallback(this.encodeObject(a.paramObject),this.encodeObject((0,
u.createErrorResult)(u.ErrorCode.UNSUPPORTED_PLATFORM,"Unsupported platform, probably not running in app WebView.")))}}]);return b}(function(a){return a&&a.__esModule?a:{"default":a}}(a(4072))["default"]);c["default"]=b},8392:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":
"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?e(Object(c),!0).forEach(function(b){n(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):
e(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,m(d.key),d)}}function k(a,b,c){b&&d(a.prototype,b);c&&d(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function q(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&l(a,b)}function l(a,b){l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return l(a,b)}function t(a){var b=r();return function(){var c=u(a);if(b){var d=u(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);if(!c||"object"!==f(c)&&"function"!==typeof c){if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");
if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}}function r(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}function u(a){u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return u(a)}
function n(a,b,c){b=m(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function m(a){a:if("object"===f(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==f(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===f(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
return c.apply(this,arguments)}q(b,a);var c=t(b);k(b,[{key:"isAPIAvailable",value:function(a){var c=x[b.WEBKIT_KEY];return c&&(c=c[b.MESSAGE_HANDLERS_KEY])&&c[a.namespace]?!0:!1}},{key:"apiCall",value:function(a){console.log("Try calling iOS native bridge method. ".concat(a.namespace,".").concat(a.method));x.webkit.messageHandlers[a.namespace].postMessage(this.encodeObject(h(h({},a.paramObject),{},{apiName:a.method})))}}]);return b}(function(a){return a&&a.__esModule?a:{"default":a}}(a(4072))["default"]);
c["default"]=b;n(b,"WEBKIT_KEY","webkit");n(b,"MESSAGE_HANDLERS_KEY","messageHandlers")},4072:function(b,c,a){function f(a){"@babel/helpers - typeof";return f="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},f(a)}function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,d(e.key),e)}}function h(a,b,c){b&&e(a.prototype,b);c&&e(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function d(a){a:if("object"===f(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==f(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===f(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=
void 0;var k=function(a){return a&&a.__esModule?a:{"default":a}}(a(4196));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}h(a,[{key:"encodeObject",value:function(a){return k["default"].base64URLencode(JSON.stringify(a))}}]);return a}();c["default"]=b},4145:function(b,c,a){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===
typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},e(a)}function h(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=d(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var e=0;b=function(){};return{s:b,n:function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var f=!0,h=!1,g;return{s:function(){c=c.call(a)},n:function(){var a=c.next();f=a.done;return a},e:function(a){h=!0;g=a},f:function(){try{if(!f&&null!=c["return"])c["return"]()}finally{if(h)throw g;}}}}function d(a,b){if(a){if("string"===typeof a)return k(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return k(a,b)}}function k(a,
b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function q(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,r(d.key),d)}}function l(a,b,c){b&&q(a.prototype,b);c&&q(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function t(a,b,c){b=r(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function r(a){a:if("object"===
e(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==e(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===e(a)?a:String(a)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var u=a(9384),n=f(a(7221)),m=f(a(4196)),g=a(5063),w=f(a(7525)),y=f(a(7802)),B=f(a(8392));b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");t(this,"metricPublisherMap",
new Map);t(this,"callbackMap",new Map);t(this,"apiNameMap",new Map);t(this,"callCounter",0);this.nativeCallerList=[];this.prepareIframePreventionToken();this.prepareCommonCallbackForNativeBridge()}l(a,[{key:"registerNativeCaller",value:function(a){this.nativeCallerList.push(a)}},{key:"nativeCall",value:function(a,b){this.prepareMetrics(a.method);this.storeAPICallState(a,b);this.findCorrectNativeCaller(a).apiCall(a)}},{key:"findCorrectNativeCaller",value:function(a){var b=h(this.nativeCallerList),
c;try{for(b.s();!(c=b.n()).done;){var d=c.value;if(d.isAPIAvailable(a))return console.log("Found one native bridge that can handle the request. Caller class is:"+d.constructor.name),d}}catch(da){b.e(da)}finally{b.f()}return new y["default"]}},{key:"storeAPICallState",value:function(a,b){var c=this,d=Date.now();a.paramObject.invocationTime=d;a.paramObject.callbackFunctionNameKey="mapJSCallback";a.paramObject.callingId=a.method+d+this.callCounter;this.callCounter+=1;this.callbackMap.set(a.paramObject.callingId,
b);this.apiNameMap.set(a.paramObject.callingId,a.method);0<a.paramObject.timeout&&(a.paramObject.timerId=setTimeout(function(){b((0,u.createErrorResult)(u.ErrorCode.TIMEOUT_ERROR,"Native bridge call timeout."));var d=c.metricPublisherMap.get(a.method);null===d||void 0===d?void 0:d.publishCounter("Timeout",1)},a.paramObject.timeout))}},{key:"prepareCommonCallbackForNativeBridge",value:function(){var a=this;console.log("Setting up common generic callback");x.mapJSCallback=function(b,c){b=JSON.parse(m["default"].base64URLdecode(b));
var d=b.callingId,e=b.timerId;if("function"===typeof a.callbackMap.get(d)){var f=a.callbackMap.get(d);a.callbackMap["delete"](d);"number"===typeof e&&(console.log("Timer id is valid, clear the timeout"),x.clearTimeout(e));e=Date.now()-b.invocationTime;d=a.apiNameMap.get(d);if("undefined"!==typeof d&&(d=a.metricPublisherMap.get(d),null===d||void 0===d?void 0:d.publishTimer("Time",e),"undefined"!==typeof f))if(a.shouldThrowTimeoutError(b,e))null===d||void 0===d?void 0:d.publishCounter("Error",1),f((0,
u.createErrorResult)(u.ErrorCode.TIMEOUT_ERROR,"Overall elapsed time is longer than timeout."));else try{var h=m["default"].base64URLdecode(c),g=JSON.parse(h);console.log("Loading callback with result");"undefined"!==typeof g.errorCode?null===d||void 0===d?void 0:d.publishCounter("Success",1):null===d||void 0===d?void 0:d.publishCounter("Error",1);f(g)}catch(N){null===d||void 0===d?void 0:d.publishCounter("Error",1),f((0,u.createErrorResult)(u.ErrorCode.MALFORMED_RESPONSE,"Native returning non json formated result."))}}}}},
{key:"prepareIframePreventionToken",value:function(){var a=this;x.injectTokenCallback=function(b,c){b=JSON.parse(m["default"].base64URLdecode(b));var d=JSON.parse(m["default"].base64URLdecode(c));c=document.getElementById(d.callingId);if(null!==c){var e,f=d.originalNamespace;d=d.originalFunction;b.token=c.innerText;b=new n["default"](f,d,b);a.findCorrectNativeCaller(b).apiCall(b);null===(e=c.parentNode)||void 0===e?void 0:e.removeChild(c)}}}},{key:"shouldThrowTimeoutError",value:function(a,b){return"undefined"!==
typeof a.timeout&&b>=a.timeout}},{key:"prepareMetrics",value:function(a){"undefined"===typeof this.metricPublisherMap.get(a)&&this.metricPublisherMap.set(a,(0,g.getMetricsPublisher)(a));a=this.metricPublisherMap.get(a);null===a||void 0===a?void 0:a.publishCounter("Counter",1)}}],[{key:"getInstance",value:function(){a.instance||(a.instance=new a,a.instance.registerNativeCaller(new w["default"]),a.instance.registerNativeCaller(new B["default"]));return a.instance}}]);return a}();c["default"]=b},4196:function(b,
c){function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},a(b)}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,h(d.key),d)}}function e(a,b,c){b&&
f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function h(b){a:if("object"===a(b)&&null!==b){var c=b[Symbol.toPrimitive];if(c!==v){b=c.call(b,"string");if("object"!==a(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}return"symbol"===a(b)?b:String(b)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;b=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
}e(a,null,[{key:"base64URLencode",value:function(a){return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"base64URLdecode",value:function(a){a=a.replace(/-/g,"+").replace(/_/g,"/");return atob(a)}}]);return a}();c["default"]=b},5645:function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c.TIMEOUT_NETWORK_IN_MILLISECONDS=c.TIMEOUT_LOCAL_IN_MILLISECONDS=c.COMMON_NAMESPACE=void 0;c.COMMON_NAMESPACE="IDENTITY_MOBILE";c.TIMEOUT_LOCAL_IN_MILLISECONDS=1E3;c.TIMEOUT_NETWORK_IN_MILLISECONDS=
1E4},5063:function(b,c,a){Object.defineProperty(c,"__esModule",{value:!0});c.getMetricsPublisher=function(a){var b="unknown";"undefined"!==typeof x.location&&(b=x.location.pathname.replace(/\//g,"_"));b="IdentityService.".concat(b);return new f.IdentityKatalMetricsPublisher(b,"MAPNativeJSInterface",a)};var f=a(6957)},6490:function(b){b.exports=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"]},942:function(b,c,a){c=a(6490);
var f=new RegExp("("+c.join("|")+")","ig");b.exports=function(a){return!!a.match(f)}},5877:function(b,c,a){c=a(3570);a=a(1171);a.v1=c;a.v4=a;b.exports=a},5327:function(b){for(var c=[],a=0;256>a;++a)c[a]=(a+256).toString(16).substr(1);b.exports=function(a,b){b=b||0;return[c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]]].join("")}},5217:function(b){var c="undefined"!=typeof crypto&&
crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof x.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(c){var a=new Uint8Array(16);b.exports=function(){c(a);return a}}else{var f=Array(16);b.exports=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),f[a]=b>>>((a&3)<<3)&255;return f}}},3570:function(b,c,a){var f=a(5217),e=a(5327),h,d,k=0,q=0;b.exports=function(a,b,c){c=b&&c||0;var l=b||[];a=a||{};var n=
a.node||h,m=a.clockseq!==v?a.clockseq:d;if(null==n||null==m){var g=f();null==n&&(n=h=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]);null==m&&(m=d=(g[6]<<8|g[7])&16383)}g=a.msecs!==v?a.msecs:(new Date).getTime();var p=a.nsecs!==v?a.nsecs:q+1,t=g-k+(p-q)/1E4;0>t&&a.clockseq===v&&(m=m+1&16383);(0>t||g>k)&&a.nsecs===v&&(p=0);if(1E4<=p)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");k=g;q=p;d=m;g+=122192928E5;a=(1E4*(g&268435455)+p)%4294967296;l[c++]=a>>>24&255;l[c++]=a>>>16&255;l[c++]=a>>>8&255;l[c++]=
a&255;a=g/4294967296*1E4&268435455;l[c++]=a>>>8&255;l[c++]=a&255;l[c++]=a>>>24&15|16;l[c++]=a>>>16&255;l[c++]=m>>>8|128;l[c++]=m&255;for(m=0;6>m;++m)l[c+m]=n[m];return b?b:e(l)}},1171:function(b,c,a){var f=a(5217),e=a(5327);b.exports=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||f)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var d=0;16>d;++d)b[c+d]=a[d];return b||e(a)}},6470:function(){},3897:function(b){b.exports=function(b,a){if(null==
a||a>b.length)a=b.length;for(var c=0,e=Array(a);c<a;c++)e[c]=b[c];return e};b.exports.__esModule=!0;b.exports["default"]=b.exports},3405:function(b,c,a){var f=a(3897);b.exports=function(a){if(Array.isArray(a))return f(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},6115:function(b){b.exports=function(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b};b.exports.__esModule=!0;b.exports["default"]=b.exports},6690:function(b){b.exports=
function(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");};b.exports.__esModule=!0;b.exports["default"]=b.exports},9728:function(b,c,a){function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,e(d.key),d)}}var e=a(4062);b.exports=function(a,b,c){b&&f(a.prototype,b);c&&f(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a};b.exports.__esModule=!0;b.exports["default"]=
b.exports},8416:function(b,c,a){var f=a(4062);b.exports=function(a,b,c){b=f(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a};b.exports.__esModule=!0;b.exports["default"]=b.exports},1588:function(b,c,a){function f(){"undefined"!==typeof Reflect&&Reflect.get?(b.exports=f=Reflect.get.bind(),b.exports.__esModule=!0):(b.exports=f=function(a,b,c){var d=e(a,b);if(d)return d=Object.getOwnPropertyDescriptor(d,b),d.get?d.get.call(3>arguments.length?a:
c):d.value},b.exports.__esModule=!0);b.exports["default"]=b.exports;return f.apply(this,arguments)}var e=a(1753);b.exports=f;b.exports.__esModule=!0;b.exports["default"]=b.exports},3808:function(b){function c(a){b.exports=c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports;return c(a)}b.exports=c;b.exports.__esModule=!0;b.exports["default"]=b.exports},1655:function(b,c,a){var f=a(6015);
b.exports=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&f(a,b)};b.exports.__esModule=!0;b.exports["default"]=b.exports},4836:function(b){b.exports=function(b){return b&&b.__esModule?b:{"default":b}};b.exports.__esModule=!0;b.exports["default"]=b.exports},9498:function(b){b.exports=
function(b){if("undefined"!==typeof Symbol&&null!=b[Symbol.iterator]||null!=b["@@iterator"])return Array.from(b)};b.exports.__esModule=!0;b.exports["default"]=b.exports},2281:function(b){b.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};b.exports.__esModule=!0;b.exports["default"]=b.exports},4993:function(b,c,a){var f=a(8698)["default"],e=a(6115);b.exports=function(a,b){if(b&&
("object"===f(b)||"function"===typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return e(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},3788:function(b,c,a){function f(a,b,c,l){f="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(a,b,c,d){if(a=e(a,b)){a=Object.getOwnPropertyDescriptor(a,b);if(a.set)return a.set.call(d,c),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(d,b)){if(!a.writable)return!1;
a.value=c;Object.defineProperty(d,b,a)}else h(d,b,c);return!0};return f(a,b,c,l)}var e=a(1753),h=a(8416);b.exports=function(a,b,c,e,h){if(!f(a,b,c,e||a)&&h)throw new TypeError("failed to set property");return c};b.exports.__esModule=!0;b.exports["default"]=b.exports},6015:function(b){function c(a,f){b.exports=c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};b.exports.__esModule=!0;b.exports["default"]=b.exports;return c(a,f)}b.exports=c;b.exports.__esModule=
!0;b.exports["default"]=b.exports},1753:function(b,c,a){var f=a(3808);b.exports=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=f(a),null!==a););return a};b.exports.__esModule=!0;b.exports["default"]=b.exports},861:function(b,c,a){var f=a(3405),e=a(9498),h=a(6116),d=a(2281);b.exports=function(a){return f(a)||e(a)||h(a)||d()};b.exports.__esModule=!0;b.exports["default"]=b.exports},5036:function(b,c,a){var f=a(8698)["default"];b.exports=function(a,b){if("object"!==f(a)||null===a)return a;
var c=a[Symbol.toPrimitive];if(c!==v){a=c.call(a,b||"default");if("object"!==f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===b?String:Number)(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},4062:function(b,c,a){var f=a(8698)["default"],e=a(5036);b.exports=function(a){a=e(a,"string");return"symbol"===f(a)?a:String(a)};b.exports.__esModule=!0;b.exports["default"]=b.exports},8698:function(b){function c(a){"@babel/helpers - typeof";return b.exports=
c="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},b.exports.__esModule=!0,b.exports["default"]=b.exports,c(a)}b.exports=c;b.exports.__esModule=!0;b.exports["default"]=b.exports},6116:function(b,c,a){var f=a(3897);b.exports=function(a,b){if(a){if("string"===typeof a)return f(a,b);var c=Object.prototype.toString.call(a).slice(8,
-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return f(a,b)}};b.exports.__esModule=!0;b.exports["default"]=b.exports}},ba={};(function(){F.d=function(b,c){for(var a in c)F.o(c,a)&&!F.o(b,a)&&Object.defineProperty(b,a,{enumerable:!0,get:c[a]})}})();(function(){F.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)}})();(function(){F.r=function(b){"undefined"!==typeof Symbol&&
Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})}})();var Y={};(function(){function b(a){"@babel/helpers - typeof";return b="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},b(a)}function c(b,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,writable:!0,configurable:!0}});Object.defineProperty(b,"prototype",{writable:!1});c&&a(b,c)}function a(b,c){a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){a.__proto__=b;return a};return a(b,c)}function f(a){var c=e();return function(){var d=h(a);if(c){var ua=h(this).constructor;d=Reflect.construct(d,arguments,ua)}else d=d.apply(this,
arguments);if(!d||"object"!==b(d)&&"function"!==typeof d){if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=this}return d}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ua){return!1}}
function h(a){h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)};return h(a)}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function k(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,l(d.key),d)}}function q(a,b,c){b&&k(a.prototype,b);c&&k(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}
function l(a){a:if("object"===b(a)&&null!==a){var c=a[Symbol.toPrimitive];if(c!==v){a=c.call(a,"string");if("object"!==b(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===b(a)?a:String(a)}function t(a){return a.filter(function(b,c){return a.indexOf(b)===c})}function r(a){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},r(a)}function u(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function n(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,g(d.key),d)}}function m(a,b,c){b&&n(a.prototype,b);c&&n(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function g(a){a:if("object"===
r(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==r(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===r(a)?a:String(a)}function w(a){return(new K.v1).createNativePasskeyCredential(a).then(function(a){return!a||Object.values(K.xs).includes(a)?a==K.xs.UserCancelError||a==K.xs.TimeoutError?z.quickBuild(A.NotAllowedError):z.quickBuild(A.CredentialCreationFailed):a})}function y(a){return navigator.credentials.create({publicKey:a}).then(function(a){return null==
a?z.quickBuild(A.CredentialCreationFailed):a})["catch"](function(a){console.warn(a);if(a instanceof DOMException){if("NotAllowedError"===a.name)return z.quickBuild(A.NotAllowedError);if("InvalidStateError"===a.name)return z.quickBuild(A.InvalidStateError)}return z.quickBuild(A.CredentialCreationFailed)})}function B(a){return za.getInstance().create(a)}function G(a){"@babel/helpers - typeof";return G="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":
p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},G(a)}function D(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function aa(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?D(Object(c),!0).forEach(function(b){var d=
c[b];a:if("object"===G(b)&&null!==b){var e=b[Symbol.toPrimitive];if(e!==v){b=e.call(b,"string");if("object"!==G(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}b="symbol"===G(b)?b:String(b);b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,
b))})}return a}function ba(a){return{id:a.id,type:a.type,transports:a.transports}}function ca(a){return{id:ea(x.atob(a.id.replace(/-/g,"+").replace(/_/g,"/"))),type:a.type,transports:a.transports}}function da(a){if("password"in a)return JSON.stringify({id:a.id,password:a.password});var b=a.response,c={id:a.id,response:{clientDataJSON:N(b.clientDataJSON),authenticatorData:N(b.authenticatorData),signature:N(b.signature)},clientExtensionResults:a.getClientExtensionResults(),type:a.type};null!=b.userHandle&&
(c.response.userHandle=N(b.userHandle));null!=a.authenticatorAttachment&&(c.authenticatorAttachment=a.authenticatorAttachment);return JSON.stringify(c)}function qa(a){a=atob(a);a=ra(a);return{relyingPartyId:a.rpId,allowedCredentials:a.allowCredentials,challenge:a.challenge,timeout:a.timeout,userVerification:a.userVerification,mediation:a.mediation}}function ra(a){return JSON.parse(a,function(a,b){return null===b?v:b})}function ea(a){return Uint8Array.from(a,function(a){return a.charCodeAt(0)}).buffer}
function N(a){return x.btoa((new Uint8Array(a)).reduce(function(a,b){return a+String.fromCharCode(b)},"")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function O(a){"@babel/helpers - typeof";return O="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},O(a)}function C(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function I(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,wa(d.key),d)}}function E(a,b,c){b&&I(a.prototype,b);c&&I(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function wa(a){a:if("object"===O(a)&&null!==a){var b=a[Symbol.toPrimitive];if(b!==v){a=b.call(a,"string");if("object"!==O(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}a=String(a)}return"symbol"===O(a)?a:String(a)}function X(a){var b;a={relyingPartyId:a.relyingPartyId,challenge:a.challenge,timeout:a.timeout,allowedCredentials:null===(b=a.allowedCredentials)||void 0===b?void 0:b.map(ba),userVerification:a.userVerification,mediation:a.mediation};return(new K.v1).getNativePasskeyCredential(a).then(function(a){return!a||Object.values(K.wM).includes(a)?a==K.wM.UserCancelError||a==K.wM.TimeoutError?z.quickBuild(A.NotAllowedError):z.quickBuild(A.CredentialRetrievalFailed):
a})}function ya(a){var b,c={rpId:a.relyingPartyId,allowCredentials:null===(b=a.allowedCredentials)||void 0===b?void 0:b.map(ca),challenge:ea(a.challenge),userVerification:a.userVerification,timeout:a.timeout};return navigator.credentials.get({publicKey:c,mediation:a.mediation}).then(function(a){return a})["catch"](function(a){console.warn(a);if(a instanceof DOMException){if("NotAllowedError"===a.name)return z.quickBuild(A.NotAllowedError);if("InvalidStateError"===a.name)return z.quickBuild(A.InvalidStateError)}return z.quickBuild(A.CredentialRetrievalFailed)})}
function M(a){return Aa.getInstance().get(a)}function J(a){"@babel/helpers - typeof";return J="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},J(a)}function L(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,
b).enumerable}));c.push.apply(c,d)}return c}function ia(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?L(Object(c),!0).forEach(function(b){var d=c[b];a:if("object"===J(b)&&null!==b){var e=b[Symbol.toPrimitive];if(e!==v){b=e.call(b,"string");if("object"!==J(b))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}b="symbol"===J(b)?b:String(b);b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):
a[b]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):L(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function V(a){var b=new URL(x.origin);b.pathname="/ax/claim/webauthn/enroll";b.searchParams.append("operation","startEnroll");a.associationHandle&&b.searchParams.append("openid.assoc_handle",a.associationHandle);return Q(b,v,{"action-id":a.actionId}).then(function(a){return a.json().then(function(b){if(a.ok){var c=
atob(b.webAuthNCreateParameters);c=ra(c);c.rp=aa({name:c.relyingParty.relyingPartyName},c.relyingParty.relyingPartyId!=v&&{id:c.relyingParty.relyingPartyId});delete c.relyingParty;c.excludeCredentials!=v&&(c.excludeCredentials=c.excludeCredentials.map(ca));c.user.id=ea(c.user.id);c.challenge=ea(c.challenge);return{credentialParameters:c,challengeId:b.webAuthNChallengeId,arb:b.arb}}return U(b)})})["catch"](fa)}function W(a){var b=new URL(x.origin);b.pathname="/ax/claim/webauthn/enroll";b.searchParams.append("operation",
"completeEnroll");a.associationHandle&&b.searchParams.append("openid.assoc_handle",a.associationHandle);return Q(b,{authenticatorAttestation:a.authenticatorAttestation,challengeId:a.challengeId,arb:a.arb},{"action-id":a.actionId}).then(function(a){return a.ok?{}:a.json().then(function(a){return U(a)})})["catch"](fa)}function ha(a){var b=new URL(x.origin);b.pathname="/ax/claim/webauthn/remove";b.searchParams.append("operation","removeEnrolledPasskeys");a.associationHandle&&b.searchParams.append("openid.assoc_handle",
a.associationHandle);return Q(b,v,{"action-id":a.actionId}).then(function(a){return a.ok?{}:a.json().then(function(a){return U(a)})})["catch"](fa)}function la(a){var b=new URL(x.origin);b.pathname="/ax/claim/webauthn/auth";b.searchParams.append("operation","completePasskeyAuth");return Q(b,{authenticationAssertion:a.authenticationAssertion,challengeId:a.challengeId,arb:a.arb}).then(function(a){return a.json().then(function(b){return a.ok?{arb:b.arb}:U(b)})})["catch"](fa)}function T(){var a=new URL(x.origin);
a.pathname="/ax/claim/webauthn/auth";return fetch(a).then(function(a){return a.ok?(a=a.headers.get("x-csrf-token"))?a:Promise.reject(z.quickBuild(A.MissingCsrfToken)):Promise.reject(z.quickBuild(A.MissingCsrfToken))})}function Q(a,b,c){return sa().then(function(d){d={method:"POST",headers:ia({"anti-csrftoken-a2z":d},c)};b&&(d.body=new URLSearchParams(Object.entries(b)));return fetch(a,d)})}function sa(){var a,b=null===(a=document.querySelector('input[name\x3d"csrf-token"]'))||void 0===a?void 0:a.getAttribute("value");
return b?Promise.resolve(b):T()}function U(a){switch(a.error){case "UnauthorizedAccess":return z.quickBuild(A.UnauthorizedAccess,a.redirectTo);case "EnrollmentFailure":return z.quickBuild(A.EnrollmentFailed);case "InvalidInput":return z.quickBuild(A.InvalidInput);case "WebAuthNValidationFailure":return z.quickBuild(A.ValidationFailure);case "CredentialNotFound":return z.quickBuild(A.CredentialNotFound)}return z.quickBuild(A.InternalFailure)}function fa(a){return a instanceof Error?(console.log(a),
z.quickBuild(A.NetworkFailure)):a}function ta(){return new Promise(function(a,b){b=new H.IdentityKatalMetricsPublisher(ma,"IdentityWebAuthnJSSDK","isWebAuthnSupported",void 0);(new H.PlatformDetector).isRunningInWebView()?xa(b,a):Ba(b,a)})}function xa(a,b){if(R.supportWebView)(new K.v1).isNativePasskeyAPIAvailable().then(function(c){a.publishCounterOnce(String(c));b(c)})["catch"](function(c){console.error(c);a.publishCounterOnce("false");b(!1)});else a.publishCounterOnce("false"),b(!1)}function Ba(a,
b){Promise.all([x.PublicKeyCredential&&x.PublicKeyCredential.isConditionalMediationAvailable?x.PublicKeyCredential.isConditionalMediationAvailable():Promise.resolve(!1),Promise.resolve(x.PublicKeyCredential&&!!x.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable)]).then(function(a){b(a[0]&&a[1])})["catch"](function(a){b(!1)})}function Z(a){"@babel/helpers - typeof";return Z="function"==typeof Symbol&&"symbol"==p(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":
p(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":p(a)},Z(a)}function va(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,Ca(d.key),d)}}function Da(a,b,c){b&&va(a.prototype,b);c&&va(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function Ca(a){a:if("object"===Z(a)&&null!==a){var b=a[Symbol.toPrimitive];
if(b!==v){a=b.call(a,"string");if("object"!==Z(a))break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"===Z(a)?a:String(a)}function P(a){return a.then(function(a){return a instanceof z&&a.errorCodes&&a.errorCodes.every(function(a){return Object.values(A).includes(a)})?Promise.reject(a):a})}function ja(a,b,c){a instanceof Error&&(console.error(a),a=z.quickBuild(A.InternalFailure));null===c||void 0===c?void 0:c.publishCounterOnce(a.errorCodes[0]);return b(a)}
function Ea(){return new Fa}F.r(Y);F.d(Y,{FetchPasskeySignInAssertionResponse:function(){return na},WebAuthnEnrollResponse:function(){return oa},WebAuthnErrorCode:function(){return A},WebAuthnErrorDetails:function(){return z},WebAuthnRemoveResponse:function(){return pa},WebAuthnSignInResponse:function(){return ka},createCredential:function(){return B},getCredential:function(){return M},getWebAuthn:function(){return Ea},webAuthnNativeOrWebConfig:function(){return R}});var R={supportWebView:!1,iOS:{useNativeJSBridgeForEnroll:!1,
useNativeJSBridgeForSignIn:!0,useNativeJSBridgeForSignInWithAutofill:!0},android:{useNativeJSBridgeForEnroll:!0,useNativeJSBridgeForSignIn:!0,useNativeJSBridgeForSignInWithAutofill:!0}},K=F(7395),H=F(6957),A=function(a){a.NotAllowedError="ClientError_NotAllowedError";a.InvalidStateError="ClientError_InvalidStateError";a.UnauthorizedAccess="ClientError_UnauthorizedAccess";a.NetworkFailure="ClientError_NetworkFailure";a.CredentialCreationFailed="ClientError_CredentialCreationFailed";a.CredentialRetrievalFailed=
"ClientError_CredentialRetrievalFailed";a.MissingCsrfToken="ServerError_MissingCsrfToken";a.EnrollmentFailed="ServerError_EnrollmentFailed";a.CredentialNotFound="ServerError_CredentialNotFound";a.ValidationFailure="ServerError_ValidationFailure";a.InvalidInput="ServerError_InvalidInput";a.InternalFailure="ServerError_InternalFailure";return a}({}),z=function(){function a(b,c){d(this,a);this._errorCodes=t(b);c&&(this._redirectionUrl=c)}q(a,[{key:"appendErrorCode",value:function(a){this._errorCodes.includes(a)||
this._errorCodes.push(a)}},{key:"errorCodes",get:function(){return this._errorCodes}},{key:"redirectionUrl",get:function(){return this._redirectionUrl}}],[{key:"quickBuild",value:function(b,c){for(var d=arguments.length,e=Array(2<d?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return new a([b].concat(e),c)}},{key:"dummyBuild",value:function(){return new a([])}}]);return a}(),S=function(){function a(b){d(this,a);this._errorDetails=b}q(a,[{key:"errorCodes",get:function(){return this._errorDetails.errorCodes}},
{key:"redirectionUrl",get:function(){return this._errorDetails.redirectionUrl}},{key:"isSuccess",get:function(){return 0==this._errorDetails.errorCodes.length}}]);return a}(),oa=function(a){function b(a){d(this,b);return e.call(this,a)}c(b,a);var e=f(b);q(b,null,[{key:"success",value:function(){return new b(z.dummyBuild())}},{key:"error",value:function(a){return new b(a)}}]);return b}(S),pa=function(a){function b(a){d(this,b);return e.call(this,a)}c(b,a);var e=f(b);q(b,null,[{key:"success",value:function(){return new b(z.dummyBuild())}},
{key:"error",value:function(a){return new b(a)}}]);return b}(S),ka=function(a){function b(a,c){d(this,b);a=e.call(this,a);a._arb=c;return a}c(b,a);var e=f(b);q(b,[{key:"arb",get:function(){return this._arb}},{key:"isSuccess",get:function(){return this._arb!=v&&0==this._errorDetails.errorCodes.length}}],[{key:"success",value:function(a){return new b(z.dummyBuild(),a)}},{key:"error",value:function(a){return new b(a)}}]);return b}(S),na=function(a){function b(a,c){d(this,b);a=e.call(this,a);a._assertion=
c;return a}c(b,a);var e=f(b);q(b,[{key:"assertion",get:function(){return this._assertion}},{key:"isSuccess",get:function(){return this._assertion!=v&&0==this._errorDetails.errorCodes.length}}],[{key:"success",value:function(a){return new b(z.dummyBuild(),a)}},{key:"error",value:function(a){return new b(a)}}]);return b}(S),Ga=function(){function a(){u(this,a)}m(a,[{key:"create",value:function(a){return y(a)}}]);return a}(),Ha=function(){function a(){u(this,a)}m(a,[{key:"create",value:function(a){return w(a)}}]);
return a}(),za=function(){function a(){u(this,a)}m(a,null,[{key:"getInstance",value:function(){var a=new H.PlatformDetector;return a.isRunningInWebView()&&(a=a.getOSName(),a===H.Platform.Android&&R.android.useNativeJSBridgeForEnroll||a===H.Platform.iOS&&R.iOS.useNativeJSBridgeForEnroll)?new Ha:new Ga}}]);return a}(),Ia=function(){function a(){C(this,a)}E(a,[{key:"get",value:function(a){return ya(a)}}]);return a}(),Ja=function(){function a(){C(this,a)}E(a,[{key:"get",value:function(a){return X(a)}}]);
return a}(),Aa=function(){function a(){C(this,a)}E(a,null,[{key:"shouldDoNativeGetCredential",value:function(){var a=new H.PlatformDetector;return a.isRunningInWebView()&&(a=a.getOSName(),a===H.Platform.Android&&R.android.useNativeJSBridgeForSignIn||a===H.Platform.iOS&&R.iOS.useNativeJSBridgeForSignIn)?!0:!1}},{key:"getInstance",value:function(){return this.shouldDoNativeGetCredential()?new Ja:new Ia}}]);return a}();S=x.location.pathname.replace(/\//g,"_");var ma="IdentityService.Passkey.".concat(S),
Fa=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}Da(a,[{key:"enrollPasskey",value:function(a){var b=(0,H.generateUUID)(),c=new H.IdentityKatalMetricsPublisher(ma,"IdentityWebAuthnJSSDK","Enroll",b);c.publishCounterOnce("Start");return P(V({actionId:b,associationHandle:a.associationHandle})).then(function(c){return P(B(c.credentialParameters)).then(function(d){var e=d.response;e={id:d.id,response:{clientDataJSON:N(e.clientDataJSON),attestationObject:N(e.attestationObject),
transports:e.getTransports()},clientExtensionResults:d.getClientExtensionResults(),type:d.type};null!=d.authenticatorAttachment&&(e.authenticatorAttachment=d.authenticatorAttachment);d=JSON.stringify(e);return P(W({authenticatorAttestation:d,challengeId:c.challengeId,arb:c.arb,actionId:b,associationHandle:a.associationHandle}))})}).then(function(){c.publishCounterOnce("Success");return oa.success()})["catch"](function(a){return ja(a,oa.error,c)})}},{key:"signInWithPasskey",value:function(a){var b=
qa(a.serializedCredentialParameters);return P(M(b)).then(function(b){if(!b)return Promise.reject(z.quickBuild(A.CredentialRetrievalFailed));b={challengeId:a.challengeId,authenticationAssertion:da(b),arb:"DummyArb"};return P(la(b))}).then(function(a){return ka.success(a.arb)})["catch"](function(a){return ja(a,ka.error)})}},{key:"removeEnrolledPasskeys",value:function(a){var b=a.actionId?a.actionId:(0,H.generateUUID)(),c=new H.IdentityKatalMetricsPublisher(ma,"IdentityWebAuthnJSSDK","Delete",b);c.publishCounterOnce("Start");
return P(ha({actionId:b,associationHandle:a.associationHandle})).then(function(){c.publishCounterOnce("Success");return pa.success()})["catch"](function(a){return ja(a,pa.error,c)})}},{key:"fetchPasskeySignInAssertion",value:function(a){a=qa(a.serializedCredentialParameters);return P(M(a)).then(function(a){if(!a)return Promise.reject(z.quickBuild(A.CredentialRetrievalFailed));a=da(a);return na.success(x.btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,""))})["catch"](function(a){return ja(a,
na.error)})}},{key:"signInWithPasskeyAutofill",value:function(){return Promise.resolve(ka.success("DummyArb"))}},{key:"isWebAuthnSupported",value:function(){return ta()}}]);return a}()})();aa=Y})();"use strict";D.register("IdentityWebAuthn",function(){return aa})});